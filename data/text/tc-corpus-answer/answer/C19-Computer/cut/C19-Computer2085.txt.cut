计算,计算机,算机,机工,机工程,工程,
COMPUTER,ENGINEERING
1999,25,卷,10,Vol,25,No,10,1999



Oracle,Client,Server,性能,调整,张,冬,王,鸿,姚,耀,文,摘要,探讨,研究,Oracle,服务,服务器,务器,Client,Server,特点,原理,阐述,提高,调整,Oracle,应用,系统,系统性,性能,原则,方法,关键,关键词,Oracle,客户,服务,服务器,务器,系统,全程,区,网络,I,O,回,滚,段,
Oracle,Performance,Tunign,Based,on,Client,Server
Zhang,Dong,Wang,Hong,Yao,Yaowen
,Dep,of,Computer,Sciences,and,Engineering,South,China,University,of,Technology,Guangzhou,510641,Dept,of,Informatics,Guangzhou,School,of,Finauce,Guangzhou,510521,Abstract,In,this,paper,discuses,and,studies,the,characteristic,of,Oracle,service,and,theory,about,Oracle,service,based,on,Client,Server,It,also,gives,the,way,to,improve,and,ture,the,performance,of,Oracle,based,on,Client,Server
,Key,words,Oracle,Cclient,Server,SGA,Network,I,O,Rollback,Segment
,Oracle,数据,数据库,据库,广泛,广泛应用,应用,社会,各个领域,领域,特别,特别是在,Client,Server,模式,应用,应用,开发,开发者,往往,碰到,整个,系统,性能,着数,数据,数据量,增大,大显,显著,下降,问题,了解,解决,问题,以下,几个,数据,数据库,据库,服务,服务器,务器,网络,I,O,应用,应用程序,程序,整个,系统,调整,充分,充分发挥,分发,发挥,Oracle,效能,提高,整个,系统,性能,调整,整数,数据,数据库,据库,服务,服务器,务器,性能,Oracle,数据,数据库,据库,服务,服务器,务器,整个,系统,核心,性能,高低,直接,影响,整个,系统,性能,调整,Oracle,数据,数据库,据库,服务,服务器,务器,性能,主要,以下,几个,考虑,调整,操作,操作系统,系统,适合,Oracle,数据,数据库,据库,服务,服务器,务器,运行,Oracle,数据,数据库,据库,服务,服务器,务器,很大,大程,大程度,程度,依赖,依赖于,赖于,运行,服务,服务器,务器,操作,操作系统,系统,操作,操作系统,系统,不能,提供,最好,好性,性能,无论如何,调整,Oracle,数据,数据库,据库,服务,服务器,务器,无法,发挥,应有,性能,Oracle,数据,数据库,据库,服务,服务器,务器,规划,规划系统,系统,系统资源,资源,已有,计算,计算机,算机,可用,资源,规划,划分,分配,配给,Oracle,服务,服务器,服务器资源,务器,资源,原则,尽可,尽可能,可能,Oracle,服务,服务器,务器,使用,资源,最大,最大化,大化,特别,Client,Server,尽量,服务,服务器,务器,资源,运行,Oracle,服务,调整,计算,计算机,计算机系,计算机系统,算机,机系统,系统,内存,配置,多数,操作,操作系统,系统,虚,存,模拟,模拟计算,计算,计算机,算机,机上,更,内存,实际,实际上,硬盘,盘上,一定,磁盘,磁盘空间,空间,实际,内存,内存空间,空间,不能,满足,应用,应用软件,软件,要求,操作,操作系统,系统,这部,这部分,部分,磁盘,磁盘空间,空间,对内,内存,信息,进行,页面,替换,引起,大量,磁盘,I,O,操作,整个,服务,服务器,务器,性能,下降,避免,使用,虚,存,应加,加大,大计,计算,计算机,算机,内存,Oracle,数据,数据库,据库,服务,服务器,务器,设置,操作,操作系统,系统,进程,优先,优先级,不要,操作,操作系统,系统,调整,Oracle,进程,优先,优先级,Oracle,数据,数据库,数据库系统,据库,系统,后台,前台,台数,数据,数据库,据库,服务,服务器,务器,进程,执行,同等,重要,工作,需要,要同,同等,优先,优先级,安装,数据,数据库,据库,服务,服务器,务器,进程,使用,缺省,优先,优先级,运行,调整,内存,分配,Oracle,数据,数据库,据库,服务,服务器,务器,保留,基本,内存,高速,高速缓存,缓存,对应,不同,同类,类型,数据,库,高速,高速缓存,缓存,字典,高速,高速缓存,缓存,和缓,缓冲,缓冲区,高速,高速缓存,缓存,库,高速,高速缓存,缓存,字典,高速,高速缓存,缓存,一起,构成,共享,池,共享,池,再加,加上,缓冲,缓冲区,高速,高速缓存,缓存,构成,系统,全程,区,SGA,SGA,对数,数据,数据库,据库,数据,进行,快速,快速访问,访问,一个,系统,全程,区,SGA,需要,频繁,进行,释放,分配,不能,达到,快速,快速访问,访问,数据,目的,应,SGA,放在,主存,不要,放在,虚拟,虚拟内存,内存,内存,调整,主要,指,调整,整组,组成,SGA,内存,结构,大小,提高,系统,系统性,性能,Oracle,数据,数据库,据库,服务,服务器,务器,内存,结构,需求,应用,密切,密切相关,相关,以内,内存,结构,调整,应,磁盘,I,O,调整,之前,前进,进行,库,缓冲,缓冲区,调整,库,缓冲,缓冲区,包含,私用,共享,SQL,PL,SQL,区,比较,库,缓冲,缓冲区,命中,命中率,决定,大小,调整,库,缓冲,缓冲区,必须,了解,库,缓冲,缓冲区,活动,动情,情况,库,缓冲,缓冲区,活动,统计,信息,保留,留在,动态,动态性,性能,表,v,librarycache,数据,数据字,字典,查询,表,了解,活动,动情,情况,决定,调整,Select,sum,pins,sum,reloads,from,v,librarycache,Pins,列,给出,SQL,语句,PL,SQL,块,访问,对象,定义,次数,Reloads,列,给出,SQL,PL,SQL,块,隐,式,分析,对象,定义,重装,装载,库,程序,缓冲,缓冲区,中发,发生,错误,sum,pins,sum,reloads,库,缓冲,缓冲区,命中,命中率,合适,sum,pins,sum,reloads,需,调整,初始,初始化,参数,shared,pool,size,重新,调整,整分,分配,配给,共享,池,内存,存量,数据,数据字,字典,缓冲,缓冲区,调整,数据,数据字,字典,缓冲,缓冲区,包含,数据,数据库,据库,结构,用户,实体,信息,数据,数据字,字典,命中,命中率,对系统,系统,系统性,性能,影响,极大,数据,数据字,字典,缓冲,缓冲区,使用,情况,记录,动态,动态性,性能,表,v,librarycache,查询,表,了解,活动,动情,情况,决定,调整,Select,sum,gets,sum,getmisses,from,v,rowcache,Gets,列,相应,项,请求,次数,统计,Getmisses,列,引起,缓冲,缓冲区,出错,数据,请求,次数,频繁,访问,数据,数据字,字典,缓冲,缓冲区,sum,getmisses,sum,gets,10,15,大于,于此,百分,百分数,分数,应考,考虑,增加,增加数,加数,数据,数据字,字典,缓冲,缓冲区,容量,需,调整,初始,初始化,参数,shared,pool,size,重新,调整,整分,分配,配给,共享,池,内存,存量,缓冲,缓冲区,高速,高速缓存,缓存,调整,用户,进程,所存,存取,有数,数据,缓冲,缓冲区,高速,高速缓存,缓存,存取,该部,部分,命中,命中率,性能,至关,至关重要,重要,缓冲,缓冲区,高速,高速缓存,缓存,使用,情况,记录,动态,动态性,性能,表,v,sysstat,查询,表,了解,活动,动情,情况,决定,调整,Select,name,value,from,v,sysstat,where,name,in,dbblock,gets,consistent,gets,physical,reads,dbblock,gets,consistent,gets,请求,求数,数据,缓冲,缓冲区,读,次数,physical,reads,请求,求数,数据,引起,盘中,读,文件,次数,从缓,缓冲,缓冲区,高速,高速缓存,缓存,读,可能,可能性,高低,称为,缓冲,缓冲区,命中,命中率,计算,计算公式,公式,Hit,Ratio,physical,reds,dbblock,gets+consistent,gets,Hit,Ratio,60,70,应增,增大,db,block,buffers,参数,参数值,数值,db,block,buffers,调整,整分,分配,配给,缓冲,缓冲区,高速,高速缓存,缓存,内存,存量,db,block,buffers,可设,设置,分配,缓冲,缓冲区,高速,高速缓存,缓存,数据,块,个数,缓冲,缓冲区,高速,高速缓存,缓存,字节,字节数,节数,db,block,buffers,db,block,size,db,block,size,表示,数据,块,大小,字节,字节数,节数,可查,查询,v,parameter,表,select,name,value,from,v,parameter,where,name,db,block,size,修改,上述,数据,数据库,据库,初始,初始化,参数,以后,必须,关闭,数据,数据库,据库,重新,重新启动,启动,数据,数据库,据库,新,设置,作用,调整,磁盘,I,O
,磁盘,I,O,速度,整个,系统,系统性,性能,重要,影响,解决,磁盘,I,O,问题,显著,提高,高性,高性能,性能,影响,磁盘,I,O,性能,主要,原因,磁盘,竞争,I,O,次数,数据,块,空间,分配,管理,Oracle,数据,数据库,据库,服务,服务器,务器,创建,建新,新文,文件,不论是,表,空间,所用,数据,数据文件,文件,数据,事务,登录,所用,日志,文件,应,仔细,考虑,数据,数据库,据库,服务,服务器,务器,可用,磁盘,资源,服务,服务器,务器,上有,多个,磁盘,文件,分散,存储,可用,磁盘,盘上,减少,对数,数据,数据库,据库,数据,数据文件,文件,事务,日志,文件,竞争,而有,有效,改善,改善服务,服务,服务器,务器,性能,不同,应用,系统,数据,集,应当,创见,不同,表,空间,别存,存储,自应,应用,系统,数据,尽可,尽可能,可能,表,空间,对应,数据,数据文件,文件,存放,放在,不同,磁盘,盘上,这种,物理,理上,每个,应用,系统,表,空间,分散,存放,方法,排除,两个,应用,系统,竞争,磁盘,可能,可能性,数据,数据文件,文件,事务,日志,文件,别存,存放,放在,不同,磁盘,盘上,事务,事务处,事务处理,处理,执行,磁盘,访问,妨碍,相应,事物,日志,登记,磁盘,访问,多个,磁盘,可用,两个,事物,日志,志成,成员,放在,不同,磁盘,磁盘驱动器,驱动,驱动器,消除,日志,文件,可能,产生,磁盘,竞争,应,一个,应用,表,数据,索引,数据,分散,存放,不同,表,空间,尽量,不同,同类,类型,表,空间,存放,放在,不同,磁盘,盘上,消除,表,数据,索引,数据,磁盘,竞争,调整,整数,数据,数据库,据库,服务,服务器,务器,回,滚,段,回,滚,段,一个,存储,区域,数据,数据库,据库,使用,存储,区域,存放,曾经,经由,一个,事务,更新,删除,行,原始,原始数据,数据,用户,回,滚,一个,事务,事务所,做,改变,数据,数据库,据库,回,滚,段,读,回,改变,数据,该事,事务,影响,行,改变,变为,原状,状态,回,滚,段,控制,着数,数据,数据库,据库,处理,处理事务,理事,事务,能力,数据,数据库,据库,成功,关键,关键性,作用,数据,数据库,据库,部分,分设,设计,设计,不合,不合理,合理,严重,重影,影响,系统,性能,建立,调整,回,滚,段,原则,分离,回,滚,段,分离,回,滚,段,指,单独,回,滚,段,创建,一个,表,空间,回,滚,段,数据,数据字,字典,用户,用户数,户数,数据,索引,分离,离开,开来,回,滚,段,写入,数据,索引,写入,并行,行进,进行,分离,分离出来,减少,I,O,争,回,滚,段,数据,不分,分离,若要,表,空间,脱机,撤消,表,空间,回,滚,段,没有,脱机,之前,不能,表,空间,脱机,撤消,表,空间,不可,可用,表,空间,回,滚,段,不能,使用,浪费,分配,磁盘,磁盘空间,空间,独立,回,滚,段,可使,数据,数据库,据库,管理,变得,容易,回,滚,段,经常,经常性,常性,收缩,表,空间,自由,块,更,容易,形成,碎片,分离,回,滚,段,减少,少数,数据,数据库,据库,表,空间,碎片,产生,创建,不同,同大,大小,回,滚,段,群,联机,事物,处理,频繁,少量,数据,进行,修改,创建,回,滚,段,有利,一个,事物,入口,项,只能,限于,一个,回,滚,段,回,滚,段,应该,充分,容纳,一个,完整,事物,处理,较大,较大型,大型,事物,需要,较大,较大型,大型,回,滚,段,极个别,脱机,机处理,处理,理事,事物,产生,大量,回,滚,信息,需要,一个,特大,特大号,大号,回,滚,段,处理,理论,Oracle,数据,数据库,据库,服务,服务器,务器,上述,事物,处理,创建,三组,小事,事物,组,较大,大事,事物,组,特大,大事,事物,组,大小,不同,回,滚,段,群,分散,不同,表,空间,群,大小,相同,应能,满足,该组,事物,处理,最大,大要,要求,创建,数量,适当,回,滚,段,回,滚,段,数量,并发,事物,个数,以下,给出,并发,事物,个数,应,建立,回,滚,段,参考,数,并发,事物,n,回,滚,段,数,
n,16,4
16,n,32,8
n,32,n,4
2,调整,Client,Server,模式,网络,I,O
,Client,Server,环境,应用,用处,处理,分布,客户,应用,应用程序,程序,数据,数据库,据库,服务,服务程序,程序,之间,Client,Server,环境,Client,Server,之间,网络,I,O,整个,系统,系统性,性能,提高,瓶颈,一个,客户,应用,应用程序,程序,引起,网络,I,O,越少,应用,整个,系统,性能,越好,减少,网络,I,O,最重,重要,一条,原则,应用,应用逻辑,逻辑,集中,数据,数据库,据库,服务,服务器,务器,使用,Oracle,数据,数据库,据库,完整,约束,约束性,应用,建,表,应当,特殊,特殊要求,要求,数据,加上,适当,完整,完整性,约束,实现,数据,数据库,据库,应用,应用程序,程序,约束,数据,符合,合一,一定,条件,数据,数据库,据库,服务,服务器,服务器端,务器,端的,完整,约束,执行,操作,SQL,语句,级别,更,低,系统,机制,优化,客户,客户端,无关,服务,服务器,务器,运行,需,Client,端,Server,端,之间,传递,SQL,语句,有效,减轻,网络,I,O,负担,使用,数据,数据库,据库,触发,触发器,发器,完整,约束,约束性,只能,实现,简单,数据,约束,约束条件,条件,复杂,事物,处理,规则,无能,无能为力,最好,不要,应用,应用程序,程序,中实,实施,复杂,程序,程序控制,控制,应当,采用,数据,数据库,据库,触发,触发器,发器,实施,复杂,事物,规则,数据,数据库,据库,触发,触发器,发器,实现,数据,数据库,据库,应用,应用程序,程序,约束,数据,符合,复杂,事物,处理,规则,容易,创建,便于管理,管理,避免,大量,网络,I,O,当前,表,A,中成,成为,历史,记录,A,表,中转,转储,历史,表,B,表示,Lsbs,应用,应用程序,程序,中实,实现,数据,数据库,据库,触发,触发器,发器,实现,
Beign,Create,trigger,delete1
,Update,A,set,lsbs,T,After,update,of,lsbs,on,A
,Insert,into,B,For,each,row
,Select,from,A,where,lsbs,T,Insert,into,B
,Delete,A,where,lsbs,T,select,from,A,where,new,lsbs,T,
End,Delete,A,where,new,lsbs,T,End,delete1,应用,应用程序,程序,中实,实现,现时,SQL,命令,请求,传送,数据,网络,Client,端,Server,端,进行,交换,数据,数据库,据库,触发,触发器,发器,SQL,Server,端,需要,网络,传输,传输数据,数据,进行,操作,数据,数据量,相当,多个,用户,操作,应用,应用程序,程序,中实,实现,复杂,控制,必将,增大,大网,网络,I,O,负荷,整个,系统,性能,能降,降低,数据,数据库,据库,触发,触发器,发器,完全,完全避免,避免,这种,情况,发生,使用,存储,过程,存储,函数,包,Oracle,存储,过程,存储,函数,命名,完成,一定,功能,存储,Server,端的,PL,SQL,集合,包,一种,过程,函数,数组,组织,封装,装成,一个,个数,数据,数据库,据库,程序,单元,方法,应用,应用程序,程序,过程,函数,SQL,命令,存储,Server,端,使用,存储,过程,存储,函数,应用,应用程序,程序,不必,包含,多个,网络,操作,SQL,语句,执行,执行数,行数,数据,数据库,据库,服务,服务器,务器,操作,简单,单调,调用,存储,过程,存储,函数,网络,上传,传输,调用,过程,名字,输出,减少,大量,网络,I,O,表,A,B,定义,name,char,20,detail,char,10,A,表,100,记录,应用,应用程序,程序,表,A,检索,detail,列,符合,给出,条件,记录,插入,表,B,Declare
,Cursor,cursor1,is,select,from,A,poin,cursor1,type,con1,number,res1,char,abcd,Begin,Insert,into,B,values,poin,name,poin,detail,end,if,For,poin,in,cursor1,loop,End,loop,End,loop,For,con1,in,loop,Commit,If,substr,poin,detail,con1,res1,then,End,果在,Developer,2000,From,按钮,触发,触发器,发器,直接,PL,SQL,实现,改写,一个,Oracle,存储,过程,From,调用,过程,实现,比较,性能,显著,提高,考虑,使用,上述,方法,先考,考虑,使用,完整,约束,约束性,数据,数据库,据库,触发,触发器,发器,存储,过程,需要,访问,数据,数据库,据库,程序,自动,实施,一定,定规,规则,检查,使用,数据,数据库,据库,触发,触发器,发器,需,少数,程序,程序实施,实施,一定,规则,检查,创建,一个,过程,程序,调用,过程,应用,应用程序,程序,调整,SQL,语句,优化,SQL,语句,执行,行速,速度,很多,因素,影响,变化,主要,影响,因素,驱动,表,执行,操作,先后,先后顺序,顺序,索引,运用,很多,不同,方法,间接,间接地,接地,改变,因素,达到,最优,执行,行速,速度,主要,探讨,多个,表,进行,连接,查询,应,优化,原则,用于,连接,子句,列,应,索引,Where,子句,应尽,尽量,利用,索引,避开,索引,连接,操作,应从,返回,较少,行,驱动,连接,表,A,B,A,表,长度,远远,远大,远大于,大于,B,表,建议,较大,A,表,驱动,Where,子句,含有,选择,选择性,条件,Where,No,20,具有,选择,选择性,部分,放在,表达,表达式,达式,最后,一个,表,索引,表,索引,索引,表,通常,驱动,表,A,表,No,列,索引,B,表,No,列,索引,应当,B,表,驱动,表,A,表,驱动,表,用于,连接,列,Where,子句,选择,条件,列,均,索引,索引,查询,有效,有效性,选择,选择性,定出,级别,结合,表,数据,构成,情况,从中,中选,选出,优化,路径,需要,考虑,子句,列,以使,使用,索引,索引,具有,唯一,唯一性,查询,表,行数,数目,建立,使用,视图,索引,利用,视图,表,列,行进,进行,裁减,隐藏,一部,一部分,部分,分数,数据,能够,涉及,多个,表,复杂,查询,视图,方式,给出,应用,应用程序,程序,程序开发,开发,简洁,快速,利用,索引,提高,查询,性能,减少,磁盘,I,O,优化,对数,数据,数据表,查询,加速,SQL,语句,执行,建立,索引,提高,高性,高性能,性能,建立,索引,应当,以下,原则,表,常用,索引,列上,查询,表,不常,更新,插入,删除,操作,查询,记录,数,应,控制,原,表,使用,Oracle,数组,组接,接口,一个,客户,应用,应用程序,程序,插入,一行,一个,查询,服务,服务器,务器,请求,某行,行时,发送,具有,单个,行,网络,包,采用,数组,处理,插入,多个,行,检索,多个,行,缓冲,数组,很少,几个,包,网上,上传,传送,数组,一个,给定,Select,语句,返回,2000,行数,数据,每行,平均,大小,40,字节,数据,数据包,大小,4kB,数组,大小,参数,arraysize,设置,20,需,服务,服务器,服务器发送,务器,发送,100,个数,数据,数据包,客户,客户机,简单,arraysize,设置,2000,同样,操作,需要,传送,20,个数,数据,数据包,减少,网络,传输,量,提高,应用,性能,总结,开发,应用,应用程序,程序,序时,上述,方法,原则,对系统,系统,进行,调整,收到,令人,令人满意,满意,效果,应当,指出,客户,客户机,网络,服务,服务器,务器,相互,相互依存,依存,组成,组成部分,部分,必须,调整,同步,产生,最佳,性能,应,系统,具体情况,情况,具体分析,分析,调整,作者,作者简介,简介,张,冬,1972,男,研究,研究生,主,研,方向,数据,数据库,据库,作者,单位,张,冬,姚,耀,文,华南,理式,大学,计算,计算机,算机,机工,机工程,工程,科学,科学系,学系,广州,510641,王,鸿,广州,金融,高等,高等专科,专科,专科学校,科学,学校,信息,系,广州,广州市,州市,510521,参考,参考文献,文献,Bobrowski,S,M,Mastering,Oracle7,Client,Server,Computing,北京,电子,工业,出版,出版社,1996
2,孙,宏,昌,Oracle,数据,数据库,数据库管理员,据库,管理,管理员,教程,北京,电子,工业,出版,出版社,1996
3,北方,北方交通,北方交通大学,交通,大学,自动,自动化,自动化系,系统,研究,研究所,Oracle7,使用,技巧,北京,科学,科学出版社,出版,出版社,1996
,收稿,日期,1999,01,04
