微型,微型机,应用,
WEIXINGJI,YU,YINGYONG
1999,月,18,卷,vol,18,No,3



C,S,系统,数据,数据库,据库,表,PK,FK,关系,TRIGGER
,技术,一种,实际,应用,魏,育成,王,耀,南,周,海燕,摘,矿山,CIMS,系统,中报,报表,子系统,系统,开发,设计,计入,入手,介绍,SQL,Server,数据,数据库,据库,中表,主键,键,PK,FK,关系,触发,触发器,发器,TRIGGER,技术,处理,数据,数据表,间数,数据,关联,灵活,应用,关键,关键词,C,S,系统,结构,结构化,查询,查询语言,语言,SQL,主键,键,触发,触发器,发器,数据,关联,MS,SQL,Server,一个,优秀,多用,多用户,用户,关系,型,数据,数据库,据库,管理,管理系,管理系统,系统,客户,客户端,开发,语言,VB,提供,功能,功能强大,强大,平台,表,主键,键,关系,触发,触发器,发器,技术,实际,开发,灵活,使用,往往,收到,效果,本文,介绍,实际,矿山,CIMS,选矿,选矿厂,矿厂,生产,数据,采集,管理,管理系,管理系统,系统,报表,子系统,系统,开发,设计,方法,着重,讨论,利用,PK,FK,关系,TRIGGER,技术,实现,表,间数,数据,引用,一致,一致性,问题,问题,提出,选矿,选矿厂,矿厂,生产,数据,采集,管理,管理系,管理系统,系统,统由,底层,层数,数据,采集,工作,工作站,服务,服务器,务器,上层,层报,报表,管理,管理工作,理工,工作,工作站,组成,系统,要求,底层,层数,数据,采集,工作,工作站,采集,生产,设备,工作,时间,用电,用电量,电量,生产,矿,量,生产,数据,实时,送到,服务,服务器,务器,SQL,Server,数据,数据库,据库,上层,层报,报表,管理,管理工作,理工,工作,工作站,数据,数据库,据库,抽取,感兴,感兴趣,兴趣,设备,记录,组成,成报,报表,打印,要求,先在,SQL,库,建立,生产,数据,数据表,Data,表,包括,设备,编号,devmark,每日,生产,生产量,产量,production,字段,devmark,为主,关键,关键字,PK,张,表,存放,有生,生产,设备,每日,生产,生产量,产量,底层,工作,工作站,每日,定时,刷新,此基础,基础,建,生产,设备,表,Devices,表,字段,设备,编号,devmark,设备,中文,中文名,中文名称,文名,名称,devname,每日,生产,生产量,产量,production,devmark,为主,关键,关键字,PK,引用,Data,表,devmark,栏,外部,关键,关键字,FK,张,表,存放,需,显示,报表,生产,设备,生产,生产量,产量,张,表,设备,设备部,部件,表,Parts,表,存放,放在,设备,表,已有,设备,部件,记录,共有,字段,设备,编号,devmark,部件,编号,parmark,部件,中文,中文名,中文名称,文名,名称,parname,每日,生产,生产量,产量,production,累计,计生,生产,生产量,产量,accumulation,设计,寿命,destime,产量,百分,百分比,percent,devmark,parmark,双关,关键,关键字,double,keys,devmark,字段,引用,Devices,表,devmark,栏,外部,关键,关键字,表,关系,图,所示,

,图,表,关系,图,现在,关键,关键问题,问题,维护,张,表,中生,生产,数据,引用,一致,一致性,何在,底层,工作,工作站,刷新,新生,生成,成数,数据,数据表,Data,每日,生产,数据,及时,传递,生产,设备,表,Devices,设备,设备部,部件,表,Parts,保证,Devices,表,添加,新设,设备,Parts,表,添加,新,部件,底层,Data,表,找到,数据,来源,表,没有,有所,所谓,孤单,单行,其三,devices,表,进行,删除,设备,操作,满足,设备,parts,表,部件,删除,前提,设备,部件,parts,表,完全,被删,删除,devices,表,设备,记录,应,被删,删除,解决,方法,几个,基本,基本概念,概念,主,关键,关键字,外关,关键,关键字,PK,FK,主,关键,关键字,唯一,表,行,若干,表,栏,组合,要求,空,总是,唯一,索引,主,关键,关键字,用于,表,外关,关键,关键字,联合,外关,关键,关键字,匹配,表,主,关键,关键字,若干,表,栏,组合,记录,不必,必是,唯一,事实,事实上,外关,关键,关键字,常,主,关键,关键字,字形,形成,关系,主,关键,关键字,字表,主表,外关,关键,关键字,字表,仆,表,仆,表,参照,主表,数据,触发,触发器,发器,TRIGGER,触发,触发器,发器,SQL,库,一种,特殊,存储,过程,SQL,Server,数据,数据库,据库,对象,数据,数据表,进行,更新,添加,删除,记录,激发,进行,行规,规定,操作,触发,触发器,发器,优点,自动,激发,引起,起数,数据,修改,工作,常常,常用,用于,不同,数据,数据表,相关,数据,串接,修改,采用,这种,方法,实现,数据,数据表,间接,数据,关联,数据,数据库,据库,集中,维护,控制,规则,变化,化时,需,修改,相应,TRIGGER,即可,系统,易于,维护,提高,工作,工作效率,效率,触发,触发器,发器,工作,引用,特殊,测试,试表,inserted,表,deleted,表,张,表,触发,触发器,发器,表,进行,insert,delete,update,操作,用于,存放,影响,表,行,副本,触发,触发器,发器,表,进行,insert,操作,新,表,行,加到,inserted,表,触发,触发器,发器,表,对此,表,进行,delete,操作,表,行,触发,触发器,发器,表,删除,转移,移到,deleted,表,update,操作,事务,效果,做,delete,操作,insert,操作,实际,应用,现在,利用,上面,介绍,PK,FK,关系,TRIGGER,技术,实现,生产,数据,数据表,Data,生产,设备,表,Devices,设备,设备部,部件,表,Parts,之间,数据,关联,保证,每日,data,表,数据,更新,及时,devices,表,parts,表,传递,data,表,devices,表,建立,update,触发,触发器,发器,
tri1,create,trigger,updatedevices
,on,data,for,update
,as
,Update,devices
,Set,devices,production,inserted,production,from,inserted
,Where,devices,devmark,inserted,devmark
tri2,create,trigger,updateparts
,on,devices,for,update
,as
,update,parts
,set,parts,production,inserted,production,from,inserted
,where,parts,devmark,inserted,devmark
,触发,触发器,发器,保证,data,表,设备,每日,生产,生产量,产量,production,刷新,照设,设备,编号,devmark,生产,生产量,产量,production,传到,devices,表,parts,表,之后,parts,表,创建,update,触发,触发器,发器,器用,用于,累加,加生,生产,生产量,产量,计算,百分,百分比,
tri3,create,trigger,calculate
,on,parts,for,update
,as
,update,parts
,set,parts,accumulation,parts,accumulation+parts,production
,parts,percent,parts,accumulation+parts,production,parts,destime,from,inserted
,where,parts,devmark,inserted,devmark
,devices,表,进行,添加,设备,操作,data,表,devices,表,存在,PK,FK,参照,关系,SQL,Server,要求,必须,添加,data,表,已有,设备,记录,回,卷,insert,操作,同理,parts,表,进行,添加,某部,部件,操作,parts,表,devices,表,PK,FK,参照,关系,强制,只能,添加,devices,表,已有,设备,部件,项,这种,强制,强制性,主键,键,关系,SQL,Server,早期,版本,新增,功能,添加,操作,不会,产生,数据,引用,孤单,单行,devices,表,进行,删除,设备,操作,设备,parts,表,存在,部件,记录,data,表,devices,表,存在,PK,FK,参照,关系,SQL,Server,允许,删除,仆,表,参照,主表,表,行,必须,先在,parts,表,设备,部件,记录,删除,删除,devices,表,台,设备,记录,parts,表,中加,加入,delete,触发,触发器,发器,目的,当在,parts,表,设备,部件,均,被删,删除,之后,同步,删除,devices,表,设备,记录,
tri4,Create,trigger,deleteparts
,on,parts,for,delete
,as
,if,select,count,from,parts,deleted,where,parts,devmark,deleted,devmark,begin
,delete,devices,from,deleted
,where,devices,devmark,deleted,devmark
,end
,上述,张,表,修改,插入,删除,操作,操作数,作数,数据,关联,过程,图,所示,


,图,表,间数,数据,关系,图,结论,实际,系统,开发,设计,计分,分析,知道,地利,利用,大型,关系,型,网络,数据,数据库,据库,表,PK,FK,关系,TRIGGER,技术,实现,关系,型,数据,数据表,之间,数据,关联,体现,服务,服务端,强大,灵活,功能,实际,应用,往往,能取,取得,事半功倍,效果,作者,单位,湖南,湖南大学,南大,大学,电气,信息,信息工程,工程,工程系,410082,参考,参考文献,文献,Microsoft,Microsoft,SQL,Server,for,Windows,NT,技术,手册,北京,学苑,出版,出版社,1995
,Microsoft,Microsoft,SQL,Server,程序,程序员,指南,北京,宇航,出版,出版社,1998
,Microsoft,Microsoft,SQL,Server,Transact,Sql,语言,参考,参考手册,手册,北京,宇航,出版,出版社,1998
,收稿,日期,1998,09,10