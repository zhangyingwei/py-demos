软件,学报,
JOURNAL,OF,SOFTWARE
1999,19,卷,Vol,19,No,1999



,Myrinet,用户,空间,精简,协议,董,春雷,郑,纬,民,摘,通信,子系统,系统,影响,工作,工作站,机群,机群系统,群系,系统,整体,整体性,体性,性能,主要,因素,文章,分析,比较,常用,网络,性能,之后,指出,出上,上层,协议,处理,影响,工作,工作站,机群,机群系统,群系,系统,系统性,性能,主要,瓶颈,640Mbps,Myrinet,连接,台,Sun,SPARC,工作,工作站,组成,机群,机群系统,群系,系统,实现,一个,用户,层,高性,高性能,性能,精简,通信,通信协议,协议,RCP,reduced,communication,protocol,精简,协议,冗余,功能,减少,少数,数据,拷贝,次数,直接,操作,硬件,缓冲,缓冲区,方法,达到,低,延迟,高效,高效率,效率,RCP,回路,延迟,延迟时间,时间,TCP,IP,小得多,200,s,vs,540,s,可用,带宽,高,178Mbps,vs,34Mbps,协议,带宽,利用,利用率,用率,达到,80,并为,上层,应用,应用程序,程序,PVM,提供,一个,简单,容易,接口,关键,关键词,工作,工作站,机群,精简,通信,通信协议,协议,并行,并行处理,处理,PVM,中图,中图法,图法,分类,分类号,TP393
A,Reduced,User,level,Communication,Protocol,for,Myrinet
DONG,Chun,lei,ZHENG,Wei,min
,Department,of,Computer,Science,and,Technology,Tsinghua,University,Beijing,100084,
Abstract,Communication,subsystem,is,a,major,factor,that,affects,the,overall,performance,of,a,workstation,cluster,system,In,this,paper,the,authors,analyzed,and,compared,the,performance,of,three,popular,networks,and,pointed,out,that,the,high,level,protocol,processing,is,the,bottleneck,of,communication,in,workstation,cluster,system,A,user,level,high,performance,protocol,called,RCP,reduced,communication,protocol,had,been,built,on,a,cluster,of,Sun,SPARC,workstations,connected,with,640Mbps,Myrinet,Low,overhead,and,high,efficiency,of,the,protocol,are,achieved,by,simplifying,the,protocol,s,redundant,functions,reducing,the,times,of,data,copying,and,operating,directly,on,hardware,buffer,The,round,trip,latency,of,RCP,is,much,lower,than,TCP,IP,200,s,vs,540,s,the,application,available,bandwidth,is,much,improved,178Mbps,vs,34,Mbps,and,the,bandwidth,usage,of,Myrinet,on,RCP,reaches,to,80,A,very,simple,interface,to,application,or,PVM,is,provided,as,well,
Key,words,Workstation,cluster,reduced,communication,protocol,parallel,processing,PVM,通信,系统,并行,工作,工作站,机群,机群系统,群系,系统,重要,组成,组成部分,部分,实现,系统,消息,消息传递,传递,功能,性能,好坏,影响,并行,并行计算,计算,加速,速比,效率,主要,因素,实现,一种,快速,消息,通信,机制,提高,高工,工作,工作站,机群,机群系统,群系,系统,系统性,性能,有效,方法,通信,系统,现状,高速,网络,发展,迅速,包括,并行,并行计算,计算,算在内,在内,多种,应用,高速,网络,需求,推动,网络,技术,飞速,飞速发展,发展,目前,出现,多种,新型,高速,网络,Fast,Ethernet,ATM,Myrinet,新型,网络,速度,传统,Ethernet,10,倍,更,高,高速,网络,运用,影响,通信,系统,系统性,性能,瓶颈,过去,网络,硬件,转移,移到,网络,网络通信,通信,通信软件,软件,也就是说,高速,网络,网络系统,系统,网络,链路,传输,延迟,已经,很小,严重,重影,影响,通信,系统,系统性,性能,提高,却是,通信,通信协议,协议,处理,开销,通信,通信协议,协议,处理,开销,销过,阻碍,高速,网,性能,大幅,大幅度,大幅度提高,幅度,度提高,提高,Myrinet,物理,链路,带宽,640Mbps,TCP,IP,协议,层,测得,带宽,42Mbps,上层,通信,通信协议,协议,开销,高速,网络,高性,高性能,性能,得不到,不到,充分,发挥,峰值,带宽,增长,增长幅度,幅度,往返,延迟,改进,所谓,高速,网络,性能,提高,往往,指,峰值,带宽,传统,Ethernet,相比,高速,网,峰值,带宽,很大,大程,大程度,程度,提高,10Mbps,增长,100Mbps,640Mbps,1Gbps,网络,带宽,反映,大数,数据,数据包,传输,能力,衡量,并行,系统,通信,性能,一个,重要,参数,往返,延迟,决定,系统,计算,粒度,直接,影响,系统,并行,效率,高速,网络,峰值,带宽,增加,应用,应用程序,程序,带宽,较大,提高,实际,系统,测试,中发,发现,往返,延迟,改善,不大,表,10Mbps,Ethernet,640Mbps,表,Ethernet,Myrinet,网络,延迟,延迟时间,时间,

,网络,类型,TCP,往返,延迟,s,UDP,往返,延迟,s,
Ethernet1,4381,146
Myrinet1,5061,370

,Myrinet,一个,字节,字节数,节数,数据,数据包,往返,延迟,延迟时间,时间,测试,Sparc,20,工作,工作站,站上,表,看出,Myrinet,通信,延迟,普通,Ethernet,高速,网络,传输,小数,数据,数据包,性能,不理,理想,小数,数据,数据包,包下,下网,网络,网络系统,系统,系统性,性能,好坏,并行,并行计算,计算,很大,大影,影响,用户,设计,并行,并行算法,算法,经常,需要,进行,小数,数据,数据量,数据,数据交换,交换,并行,并行计算,计算,计算环境,环境,PVM,运行,行时,需,发送,很多,多数,数据,数据量,很小,控制,消息,进行,系统,运行,行情,情况,监护,应用,小数,数据,数据包,传输,延迟,起到,举足,举足轻重,足轻,轻重,作用,UC,Berkeley,NFS,数据,数据包,跟踪,发现,95,数据,数据包,大小,超过,192,字节,数据,数据包,平均,大小,382,字节,减小,高速,网络,小数,数据,数据包,传输,延迟,延迟时间,时间,提高,网络,网络系统,系统,系统性,性能,重要,方法,通信,通信协议,协议,基本,不变,新型,网络,技术,涌现,没有,传统,通信,通信协议,协议,进行,较大,改进,ATM,这种,完全,不同,不同于,同于,Ethernet,高速,网络,想方设法,设法,使用,TCP,IP,协议,一个,重要,原因,产品,兼容,推广,TCP,IP,协议,几乎,占据,网络,网络通信,通信,各个领域,领域,并行,并行机,机群,机群系统,群系,系统,兼容,兼容性,容性,主要,考虑,因素,传统,通信,通信协议,协议,机制,软件,实现,较大,修改,克服,传统,协议,弊病,高速,网络,优越,优越性,得以,充分,展现,影响,通信,系统,系统性,性能,因素,前面,分析,说明,限制,高速,网络,性能,瓶颈,软件,问题,下面,软件,角度,分析,影响,通信,系统,系统性,性能,主要,因素,软件,引起,通信,开销,主要,协议,议处,处理,操作,操作系统,系统,处理,两方,开销,造成,操作,操作系统,系统,提供,网络,网络协议,协议,实现,环境,决定,网络,网络协议,协议,实现,方法,网络,网络协议,协议,处理,处理方式,方式,影响,通信,延迟,因素,下面,面对,两种,种因,因素,进行,较为,详细,分析,传统,TCP,IP,协议,各层次,层次,重复,实现,功能,很多,
TCP,IP,协议,面向,低速,速率,高差,差错,大数,数据,数据包,传输,设计,一个,一个多,多层,多层次,层次,软件,软件结构,结构,协议,层次,对数,数据,操作,拷贝,次数,增多,引起,延迟,延迟时间,时间,增加,多层,协议,实现,层,重复,实现,很多,多相,相同,功能,a,链路,链路层,传输,传输层,进行,差错,差错控制,控制,b,链路,链路层,应用,应用层,进行,连接,建立,释放,c,网络,网络层,应用,应用层,进行,协议,处理,处理机,调度,d,链路,链路层,应用,应用层,进行,流量,量控,控制,e,网络,网络层,应用,应用层,进行,组装,定,序,缓冲,冗余,功能,确保,数据,无差错,差错,传送,链路,传输,输出,出错,出错率,10,降至,10,这种,冗余,余处,处理,限制,数据,及时,提交,交给,应用,应用程序,程序,程序处理,处理,多层,多层次,层次,协议,结构,造成,通信,瓶颈,主要,原因,因之,合并,层次,删除,冗余,处理,设计,一种,轻型,通信,通信协议,协议,提高,高通,通信,性能,重要,方法,协议,复杂,缓冲,管理,增加,网络,延迟,网络,网络协议,协议,议处,处理,包括,很多,多功能,功能,流量,量控,控制,差错,差错控制,控制,出错,重发,机制,拥塞,控制,功能,实现,缓冲,管理,密切,密切相关,相关,缓冲,管理,作用,完成,成数,数据,分组,组装,缓冲,缓冲区,可看,看成,一种,网络,网络资源,资源,这种,资源,有限,管理,很重,重要,通常,缓冲,管理,管理机制,机制,比较,比较复杂,复杂,Berkeley,UNIX,采用,一种,叫做,mbufs,结构,协议,数据,数据包,进行,缓冲,管理,mbufs,算法,复杂,开销,很大,DECstation,5000,单字,单字节,字节,TCP,消息,缓冲,管理,mbufs,需要,100,s,512,字节,字节数,节数,数据,数据包,需要,300,s,缓冲,管理,带来,网络,延迟,很大,简化,协议,复杂,缓冲,管理,研究,主要,内容,操作,操作系统,系统,额外,开销,不可,忽视,操作,操作系统,系统,提供,系统,调用,原语,网络,网络协议,协议,实现,底层,软件,支持,网络,网络协议,协议,实现,涉及,上下文,下文,切换,调入,调出,页面,启动,I,O,设备,中断,响应,操作,操作系统,系统,处理,开销,可能,能比,协议,处理,开销,Sun,60,系统,TCP,IP,一个,个数,数据,数据包,协议,议处,处理,时间,100,s,操作,操作系统,系统,额外,开销,高达,240,s,造成,通信,性能,操作,操作系统,系统,统一,一定,程度,依赖,目前,一种,广泛,采用,思想,修改,UNIX,操作,操作系统,系统,用户,空间,实现,一个,用户,态,协议,层,协议,层,能够,旁路,操作,操作系统,系统,影响,直接,网络,硬件,设备,进行,操作,减小,这部,这部分,部分,开销,最大,大限,大限度,限度,提高,高通,通信,系统,性能,减小,通信,通信协议,协议,议处,处理,开销,实现,一个,Myrinet,通信,通信协议,协议,RCP,reduced,communication,protocol,基本,思想,抛弃,传统,TCP,IP,协议,尽量,底层,通信,通信接口,接口,基础,简化,协议,层次,不必,不必要,必要,环节,达到,减少,拷贝,次数,简化,缓冲,管理,降低,协议,议处,处理,开销,目的,精简,通信,通信协议,协议,RCP,结构,精简,通信,通信协议,协议,RCP,一个,建立,Myrinet,API,层,用户,空间,间协议,协议,应用,应用程序,程序,提供,有序,可靠,双向,传输,一端,用户,空间,数据,数据通,一条,虚拟,通道,直接,拷贝,拷贝到,远程,用户,空间,需要,系统,多次,缓冲,干预,RCP,结构,图,所示,

,图,协议,精简,通信,通信协议,协议,RCP,结构,RCP,设计,目标,减小,网络,回路,延迟,尽量,提高,链路,链路层,带宽,利用,利用率,用率,建立,Myrinet,API,层,充分,充分利用,分利,利用,Myrinet,硬件,性能,应用,应用程序,程序,提供,网络,硬件,直接,控制,RCP,设计,一个,目标,实现,一个,简单,容易,用户,编程,接口,目前,工作,工作站,机群,机群系统,群系,系统,并行,并行程序,行程,程序,程序开发,开发,环境,PVM,RCP,直接,接通,PVM,函数,接口,实现,应用,应用程序,程序,很少,改动,精简,协议,执行,PVM,并行,并行程序,行程,程序,RCP,协议,议和,PVM,结合,合起,起来,简化,用户,接口,减少,PVM,一次,次数,数据,拷贝,节省,PVM,内部,缓冲,内存,要求,大数,数据,数据量,应用,应用程序,程序,提供,更,内存,降低,访,盘,次数,提高,效率,RCP,实现,RCP,基本,思想,两个,用户,进程,之间,提供,一个,顺序,可靠,虚拟,通道,一个,平衡,协议,发送,接收,收方,完全,无论是,执行,发送,例程,执行,接收,例程,一点,同步,交换,数据,类似,PVM,阻塞,式,发送,接收,RCP,包,流程,RCP,通信,流程,图,所示,

,图,RCP,通信,流程,Myrinet,层,允许,最大,大包,长,432Bytes,RCP,传输,传输数据,数据,长度,可分,分配,分配内存,内存,内存空间,空间,限制,数据,打包,拆,包,直接,接在,用户,提供,原,缓冲,空间,进行,降低,系统,缓冲,需求,减少,数据,拷贝,次数,顺序,性,可靠,可靠性,取得,高,效率,测试,RCP,包,长,包头,信息,进行,行检,检查,不对,对数,数据,部分,计算,校验,Myrinet,接口,接口卡,卡具,具有,检错,能力,并能,保证,发送,包,到达,目的,目的地,数据,顺序,性,一个,连接,全局,计数,维护,发送,接收,完全,对称,可靠,可靠性,一个,简单,滑动,窗口,协议,议和,选择,重传,机制,保证,窗口,大小,小可,硬件,缓冲,缓冲区,大小,网络,负荷,轻重,改变,RCP,滑动,窗口,协议,图,a,所示,发送,双方,约定,收发,双方,先同,同步,确定,窗口,大小,后发,发送,发送,一个,窗口,数据,接收,收方,进行,确认,进行,一个,窗口,传送,出错,包,应答,中指,指明,出错,包,个数,序号,一个,窗口,立即,重发,发出,出错,包,窗口,尺寸,越来,越来越,总能,完成,传输,图,b,所示,

,图,简单,滑动,窗口,协议,连接,建立,管理,RCP,一个,协议,连接,接管,管理,采用,静态,方式,一通,通道,两端,进程,维护,一连,连接,这种,联接,真正,正要,交换,连接,信息,一记,记录,以后,发送,接收,提供,必要,信息,结束,实际,应用,应用程序,程序,可能,不知,知道,进程,之间,准确,时序,关系,不知,知道,执行,接收,原语,执行,发送,原语,两种,情况,RCP,工作,当先,执行,接收,原语,接收,收方,方向,发送,发,一同,同步,信息,READY,包,等待,接收,接收数据,数据,发送,方根,信息,确定,窗口,大小,并发,发送,发送数据,数据,执行,发送,原语,分为,两种,情况,一种,发送,大量,数据,数据,长度,包,长,发送,方向,接收,收方,发,一同,同步,信息,后进,进入,发送,阶段,一种,发送,小量,数据,数据,长度,包,长,同步,信息,数据,一起,发出,接收,收方,一起,确认,减小,小小,小数,数据,数据包,传输,延迟,哪种,情况,指定,定时,时间,收到,应答,发送,认为,发送,失败,重新,新发,发送,图,所示,

,图,RCP,PVM,应用,应用程序,程序,关系,RCP,并行,开发,环境,接口,尽量,尽量减少,量减少,减少,应用,应用程序,程序,修改,并行,并行程序,行程,程序,程序开发,开发,环境,PVM,部分,通信,例程,进行,重写,直接,接在,原,PVM,pvm,psend,pvm,precv,增加,一条,新,数据,数据通,数据通道,通道,图,所示,简化,应用,应用程序,程序,接口,PVM,应用,应用程序,程序,需要,显,式,调用,RCP,发送,接收,函数,每个,通信,进程,调用,一下,RCP,协议,初始,初始化,例程,打开,开通,通信,信通,通道,RCP,维护,一张,PVM,任务,标识,通信,信通,通道,转换,表,通道,连接,信息,

,图,RCP,PVM,应用,应用程序,程序,关系,RCP,还为,pvm,precv,对应,提供,一个,不经,PVM,缓冲,多播,函数,pvm,pmcast,直接,利用,RCP,用户,用户数,户数,数据,广播,播到,指定,任务,RCP,性能,分析,卡耐基,耐基,梅,隆,大学,Jose,C,Brustoloni,10Mbps,Ethernet,改进,TCP,IP,协议,实现,往返,延迟,减小,750,s,Utah,大学,Mark,Swanson,提出,一种,发送,协议,改善,往返,延迟,同步,RCP,清华,清华大学,华大,大学,计算,计算机,计算机科学,算机,科学,技术,系,并行,工作,工作站,机群,机群系统,群系,系统,台,Sun,Sparcstation,20,50+640Mbps,Myrinet,上进,进行,测试,RCP,回路,延迟,200,s,原,TCP,IP,协议,应用,应用程序,程序,带宽,178Mbps,TCP,IP,带宽,倍,图,所示,

,图,Myrinet,TCP,RCP,带宽,本文,工作,工作站,机群,机群系统,群系,系统,通信,通信网,网络,性能,进行,测试,分析,Myrinet,API,层,设计,实现,一个,建立,用户,空间,精简,通信,通信协议,协议,RCP,减少,数据,拷贝,次数,和缓,缓冲,需求,充分,充分利用,分利,利用,硬件,功能,具有,低回,回路,延迟,高带宽,带宽,利用,利用率,用率,方便,编程,接口,优点,使用,RCP,通信,PVM,应用,应用程序,程序,明显,明显提高,提高,高性,高性能,性能,本文,研究,得到,国家,863,高科技,科技,项目,基金,资助,作者,董,春雷,1964,生,博士,主要,研究,领域,并行,并行处理,处理,机群,机群系统,群系,系统,新型,网络,网络协议,协议,郑,纬,民,1946,生,教授,博士,博士生,导师,主要,研究,领域,并行,并行处理,处理,本文,通讯,通讯联系,联系,联系人,董,春雷,北京,100084,清华,清华大学,华大,大学,计算,计算机,计算机科学,算机,科学,技术,系,作者,单位,清华,清华大学,华大,大学,计算,计算机,计算机科学,算机,科学,技术,系,北京,100084
,E,mail,zwm,dcs,tsinghua,edu,cn
,参考,参考文献,文献,David,Culler,et,al,LogP,toward,a,realistic,model,of,parallel,computation,In,Proceedings,of,the,Principles,and,Practice,of,Parallel,Processing,http,now,cs,berkeleg,edu,paper,logp,ps,1993,12
,Thekkath,A,Nguyen,T,D,Moy,E,et,al,Implementing,network,protocols,at,user,level,In,Proceedings,of,SIGCOMM,94,Sept,1994,14,23
,Felderman,DeSchon,A,Cohen,D,et,al,ATOMIC,a,high,speed,local,communication,architecture,Journal,of,High,Speed,Networks,1994,30
,Dong,Chun,lei,Zheng,Wei,min,Wang,Ding,xing,et,al,A,scalable,parallel,workstation,cluster,system,In,Proceedings,of,APDC,97,Los,Alamitos,IEEE,Computer,Society,Press,1997,307,313
,Thekkath,C,Levy,H,Limits,to,low,latency,communications,on,high,speed,networks,ACM,Transactions,on,Computer,Systems,May,1993,11,179,203
,Postel,B,Transmission,Control,Protocol,RFC,792,Sept,1981
,Beguelin,Dongarra,J,Geist,A,et,al,PVM,experiences,current,status,and,future,direction,In,Proceedings,of,the,Supercomputing,93,Los,Alamitos,IEEE,Computer,Society,Press,1993,765,766
,Jose,C,Brustoloni,Brian,N,Bershad,Simple,protocol,processing,for,high,bandwidth,low,latency,networking,Technical,Report,CMU,CS,93,132
,Mark,Swanson,Leigh,Stoller,Low,latency,workstation,cluster,communications,using,sender,based,protocols,Technical,Report,UTAH,CS,1994
,1998,03,17,收稿