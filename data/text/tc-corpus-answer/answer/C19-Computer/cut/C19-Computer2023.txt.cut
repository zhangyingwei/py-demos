微型,微型机,应用,
MICROCOMPUTER,ITS,APPLICATIONS
1999,18,卷,Vol,18,No,1999



80C196KC,单片,单片机,PTS,功能,数据,采集,集中,应用,吕,治安,摘,结合,开发,一种,电力,仪表,应用,介绍,数据,采集,集中,利用,80C196KC,单片,单片机,PTS,功能,具体方法,方法,关键,关键词,80C196KC,单片,单片机,数据,采集,PTS,功能,计算,计算机,算机,应用,系统,通常,定时,中断,方式,实现,定时,采样,采用,普通,中断,工作,方式,CPU,执行,保护,断点,转入,中断,服务,保护,现场,恢复,复现,现场,返回,一系,一系列,系列,操作,CPU,开销,较大,CPU,任务,较重,采样,数据,情况,显得,更为,突出,INTEL,公司,80C1,96KC,单片,单片机,提供,一种,外部,事件,服务,服务器,务器,Peripheral,Transaction,Server,简称,PTS,功能,PTS,其内,内部,提供,微,代码,中断,服务,服务程序,程序,实现,对外,外设,管理,具有,速,度,快,CPU,开销,特点,下面,结合,开发,一种,电力,仪表,应用,一介,介绍,PTS,功能,PTS,一种,利用,其内,内部,微,代码,代码执行,执行,操作,CPU,进入,PTS,周期,操作,DMA,插入,常,指令,指令流,需要,额外,软件,开销,80C196KC,15,中断,源,映射,射到,PTS,中断,类似,PTS,PTS,向量,量表,共,15,字位,位于,2040H,205CH,排列,顺序,80C196,15,外设,中断,一一,一一对,一一对应,一对,对应,优先,优先级,相同,外设,PTS,功能,打开,外设,产,生,中断,断后,CPU,不会,进入,中断,服务,服务程序,程序,中断,是否,打开,直接,接进,进入,PTS,工作,周期,PTS,结束,产生,END,OF,PTS,中断,需要,可进,进入,外设,中断,服务,服务程序,程序,中断,中断向量,向量,不同,每个,PTS,向量,指向,段程序,程序,指向,PTS,控制,块,PTSCB,每个,控制,块,包含,8B,必须,驻留,内部,RAM,地址,必须,除尽,80C196KC,提供,PTS,模式,传送,传送模式,模式,块,传送,传送模式,模式,A,D,模式,HSI,模式,HSO,模式,PTSCB,格式,图,控制,块,PTSCON,用于,控制,PTS,工作,方式,不同,模式,PTSCON,稍,不同,单元,模式,不同,源,目的,目的地,地址,中间,暂存,存单,单元,指针,进入,PTS,之前,PTS,CB,必须,初始,初始化,


,控制,PTS,工作,80C196KC,内部,设有,寄存,寄存器,PTSSEL,PTSSRV,作用,中断,屏蔽,寄存,寄存器,中断,挂号,寄存,寄存器,相仿,二者,格,式,完全,完全相同,相同,图,打开,外设,PTS,功能,需将,PTSSEL,相应,位置,即可,外设,PTS,功能,打开,设置,PTSCB,外设,产生,中断,申请,不会,进入,相应,中断,服务,服务程序,程序,进入,PTS,周期,CPU,微,代码,PTSCB,设置,工作,模式,要求,次数,执行,操作,PTS,操作,完成,PTSSR,V,相应,位置,PTSSEL,相应,清,引发,EDN,OF,PTS,中断,中断,映射,射到,外设,中断,进入,END,OF,PTS,中断,断后,PTSSRV,相应,自动,清,PTSSEL,不能,自动,置,禁止,外设,再次,进入,PTS,服务,想,再次,进入,PTS,必须,适当,地方,如在,END,OF,PTS,软件,PTSSEL,该位,再次,置,

,PTS,A,D,模式,工作,原理,研制,仪表,要求,每周,周波,16,每次,进行,个数,数据,A,D,采样,采用,每周,周期,执,行,16,PTS,服务,进入,PTS,周期,CPU,自动,进行,A,D,采样,8096,系列,系列片,A,D,转换,换有,命令,寄存,寄存器,选择,A,D,通道,A,D,启动,方式,A,D,启动,方式,立,启动,HSO,时间,启动,所谓,立即,启动,命令,命令字,写入,命令,寄存,寄存器,A,D,立即,工作,HSO,时间,写入,命,字,HSO,预定,定时,时间,启动,A,D,转换,每个,采样,采样,命令,后台,程序,写入,命令,寄存,寄存器,并用,HSO,时间,启动,方式,启动,A,D,转换,A,D,转换,结束,引,发,A,D,结束,中断,进入,PTS,周期,转换,读取,此后,转换,PTS,立即,启动,A,D,式,完成,PTS,服务,周期,完成,引发,END,OF,PTS,中断,中断,进行,后续,处理,收集,采,数据,再次,设置,PTSSEL,PTSCB,PTSSEL,设置,须,适当,地方,PTSSEL,置,即可,PTSCB,PTSCON,格式,如见,图,


,PTSCB,UPDT,控制,S,D,修改,UPDT,每次,A,D,转换,结束,S,D,修,正后,指向,表格,中下,一位,位置,UPDT,S,D,不会,修改,仍然,指向,原来,位置,M2,M1,M0,控制,PTS,模式,可设,PTSCON,0AH,PTSCB,S,D,指针,指向,表格,表,位于,内部,RAM,位于,外部,RAM,存,放,启动,A,D,命令,A,D,转换,PTSCB,REG,指针,指向,固定,存储,元,单元,暂存,A,D,命令,命令字,PTS,执行,过程,CPU,表格,A,D,命令,暂存,于此,命令,单元,写入,A,D,命令,寄存,寄存器,硬件,横,单片,单片机,开发,专题,仪表,表里,采样,A,D,通道,进行,共,采样,A,D,采,启动,必须,程序,进行,表格,命令,A,D,通道,启动,命令,设定,P,TSCB,位于,内部,RAM,20H,表格,格位,位于,外部,RAM,4000H,共,占,24B,图,


3,软件,软件设计,设计,如前,如前所述,前所,80C196KC,单片,单片机,每周,周波,进行,16,采样,半个,周波,采样,进入,PTS,方式,采样,时刻,分布,图,与此有关,软件,软件设计,设计,计有,以下,


,交流,交流电,流电,零点,产生,一中,中断,利用,HSI0,跳变,中断,中断,设定,HSO,定时,时事,事件,初始,初始化,PTS,服务,所需,PTSCB,PTSSEL,0002H,当事,事件,发生,启,动,A,D,转换,A,D,转换,结束,引发,A,D,结束,中断,进入,PTS,服务,END,OF,PTS,中断,读取,A,D,转换,并重,重置,PTSCB,PTSSEL,进入,PTS,做好,准备,HSO,事件,发生,启动,A,D,转换,再次,进入,PTS,服务,80C196KC,单片,单片机,PTS,功能,实现,高速,多次,采样,提供,一种,有力,手段,运用,PTS,服务,可有,有效,减少,CPU,额外,开销,提高,CPU,利用,利用率,用率,CPU,进行,更为,复杂,运算,提供,有力,支持,作者,单位,湖北,湖北省,襄樊,襄樊市,东街,50,号,441021,参考,参考文献,文献,孙,涵,芳,INTEL16,单片,单片机,北京,北京,北京航空航天大学,航空,航空航天,空航,航天,天大,大学,出版,出版社,1995
,收稿,日期,1998,12,13
