软件,学报,
JOURNAL,OF,SOFTWARE
1999,10,卷,Vol,10,No,1999



,进程,系统,状态,恢复,一种,优化,方法,王,准,陈,俊,亮,摘要,进程,组成,分布,分布式,分布式系统,布式,系统,保证,保证系统,系统,失效,之后,后进,进程,状态,恢复,一致,一致性,进程,状态,回,卷,引起,依赖,关系,进程,后退,已有,依赖,关系,定义,过于,严格,该文,重新,新定,定义,进程,状态,之间,依赖,关系,减小,进程,状态,卷,回,造成,影响,关键,关键词,软件,容错,状态,一致,一致性,恢复,恢复,块,中图,中图法,图法,分类,分类号,TP316
A,New,State,Recovery,Approach,in,Distributed,System
WANG,Zhun1,CHEN,Jun,liang2
1,Beijing,Institute,of,Southern,Telecommunication,Development,CO,Ltd,Beijing,100086,National,Laboratory,of,Switching,Technology,and,Telecommunication,Networks
Beijing,University,of,Posts,and,Telecommunications,Beijing,100876,
Abstract,In,the,distributed,system,all,processes,that,depend,on,the,process,which,must,be,rolled,back,have,to,be,rolled,back,as,well,in,order,to,keep,the,global,state,consistency,The,dependency,relation,defined,in,the,previous,literature,is,too,restrict,A,new,definition,of,dependency,relation,is,proposed,in,this,paper,and,the,influence,of,a,process,rolling,back,can,be,reduced,
Key,words,Software,fault,tolerant,consistent,state,recovery,recovery,block,软件,容错,冗余,策略,基本,基本上,分为,空间,冗余,时间,冗余,两大类,大类,中时,时间,冗余,主要,B,Randell,提出,恢复,块,recovery,block,基础,展开,所谓,恢复,块,最初,顺序,顺序进程,进程,提出,指,进程,执行,过程,指定,执行,行点,进程,状态,做,接收,测试,有错,错误,存在,进程,恢复,无错,执行,行状,状态,试图,采用,同种,方法,不同,同种,方法,试,手段,得到,正确,恢复,块,方法,应用,用于,进程,并发,系统,进行,快速,有效,系统,状态,恢复,显得,十分,重要,一般说来,进程,状态,恢复,分为,协作,coordinated,协作,non,coordinated,两种,恢复,复方,方法,协作,恢复,复方,方法,系统,动态,执行,过程,进程,之间,消息,交互,划分,分为,互不,相交,若干,单元,每个,单元,均,包含,两个,更多,进程,特定,定时,时间,时间段,消息,交互,过程,单元,称为,conversation,执行,具有,封闭,封闭性,组成,进程,过程,允许,与非,进程,交互,原子,性,要求,进程,错误,均,导致,参与,进程,卷,回,进入,入会,状态,系统,复杂,复杂性,降低,复杂,复杂性,精心,精心设计,设计,进程,卷,回,距离,得到,有效,控制,以防,防止,多米,多米诺,现象,发生,不同,应用,应用领域,领域,方案,衍生,生出,变形,Exchange,目前,存在,支持,程序,程序设计,设计,语言,采用,协作,恢复,复方,方法,必须,进程,设计,人员,指定,进程,需要,保存,状态,称为,备查,查点,备查,查点,设置,对应,应用,应用程序,程序,透明,备查,查点,备查,间隔,数目,应用,优化,降低,开销,协作,恢复,复方,方法,应用,应用程序,程序,透明,系统,容错,机制,自动,进程,设置,置备,备查,查点,以备,恢复,之用,协作,恢复,复方,方法,大型,计算,型,应用,普遍,采用,采用,定期,保存,备查,查点,方案,备查,间隔,几十,几十分,几十分钟,十分,十分钟,分钟,数,小时,不等,大量,进程,交互,系统,采用,方法,处于,研究,阶段,想法,Lamport,提出,先于,happened,before,关系,基础,确定,进程,状态,之间,依赖,关系,因果,因果关系,关系,causual,relation,进程,状态,恢复,具有,依赖,关系,进程,均,需,做,适当,状态,回,卷,保证,全局,状态,一致,一致性,方法,缺点,防止,多米,多米诺,现象,发生,需要,设置,备查,查点,点过,系统,执行,效率,大打折扣,打折,打折扣,折扣,很多,人主,主张,采用,单一,备查,查点,方法,消息,消息日志,日志,法,结合,合起,起来,共同,使用,协作,恢复,复方,方法,封闭,封闭性,要求,参与,进程,过程,何非,进程,交互,之间,存在,共同,进程,只能,串行,方式,执行,具有,这种,特点,大量,存在,执行,行时,时间,长,对系统,系统,执行,效率,影响,比较,较大,协作,恢复,复方,方法,依赖,依赖性,后退,法则,一个,进程,后退,势必,引起,具有,依赖,关系,进程,后退,大量,进程,进程,具有,依赖,依赖性,进程,后退,导致,后退,进程,数目,可能,十分,庞大,需要,长,系统,状态,恢复,时间,希望,消息,交互,并发,发性,处于,同一,依赖,关系,树,进程,数目,越少,越好,进程,之间,更多,并发,关系,不论是,采用,协作,恢复,复方,方法,采用,协作,恢复,复方,方法,单一,进程,失效,系统,恢复,做到,很小,有利,有利于,利于,系统,无错,运行,效率,本文,提出,一个,优化,算法,过重,重新,新定,定义,进程,状态,依赖,关系,减小,进程,状态,回,卷,影响,影响面,关进,进程,状态,恢复,不必,卷,回,手段,实现,满足,系统,功能,功能性,性需求,需求,前提,提下,允许,系统,一定,时间,时间段,内存,存在,传统,传统意义,意义,上进,进程,之间,状态,不一,一致,现象,采用,本方,方法,优点,采用,协作,恢复,复方,方法,关进,进程,脱离,离开,开来,增加,之间,并发,执行,机会,采用,协作,恢复,复方,方法,减少,单一,进程,失效,系统,恢复,本文,节,提出,算法,成立,若干,假设,节,陈述,算法,内容,节,前人,工作,做,比较,假设,算法,建立,以下,假设,模型,之上,系统,N,进程,构成,集合,进程,之间,消息,发送,接收,方式,进行,通信,不存,存在,何其,进程,之间,交互,方式,系统,状态,系统,进程,状态,集合,进程,之间,间通信,通信,异步,性,并发,发性,存在,实现,复杂,复杂性,考虑,不要,要求,进程,状态,必须,系统,一时,时刻,相应,进程,状态,通信,可靠,可靠性,保证,不会,出现,消息,出错,丢失,重复,接收,情况,进程,类型,激励,响应,方式,进程,大部,大部分,部分,分时,时间,处于,等待,消息,状态,进程,一步,动作,取决,取决于,收到,消息,内容,进程,处理,理完,消息,之后,重新,回到,等待,消息,状态,进程,失效,语义,失效,停止,fail,stop,考虑,同一,同一时,一时,时刻,两个,更多,进程,失效,情况,援引,Lamport,先于,happened,before,关系,定义,定义,分布,分布式,分布式系统,布式,系统,事件,可能,进程,状态,改变,可能,接收,发送,消息,事件,a,先于,事件,b,发生,a,b,同一,进程,事件,a,b,之前,发生,a,进程,发送,消息,m,事件,b,进程,接收,m,事件,先于,关系,可用,符号,表示,具有,传递,传递性,a,b,b,c,a,c,以往,文献,进程,状态,之间,依赖,关系,等价,先于,关系,a,bRa,Rb,符号,表示,依赖,关系,Ra,表示,事件,a,发生,后进,进程,状态,Leong,认为,这种,依赖,关系,过于,严格,引入,消息,语义,概念,进程,状态,造成,影响,消息,定义,重要,消息,insignificant,message,重要,消息,传递,构成,依赖,关系,减小,进程,状态,依赖,树,规模,重要,消息,定义,定义,进程,Pi,发往,进程,Pj,消息,m,是非,重要,下述,条件,一成,成立,m,没有,引起,Pj,显,式,隐,式,状态,变化,所谓,显,式,状态,变化,指,进程,内容,发生,改变,隐,式,状态,变化,指,进程,消息,输出,m,没有,引起,Pj,状态,显,式,变化,m,产生,重要,消息,m,引起,Pj,状态,显,式,变化,变化,Pj,接收,一条,消息,m,重写,m,产生,重要,消息,m,引起,Pj,状态,显,式,变化,变化,Pj,未来,接收,条,消息,m,重写,m,产生,重要,消息,m,m,之间,提交,交给,Pj,消息,均,是非,重要,m,是非,重要,消息,重要,消息,进程,之间,依赖,关系,过重,重要,消息,导致,先于,关系,确定,认为,消息,语义,进一步,一步,扩充,可能,可能性,系统,进程,失效,失效,进程,卷,回,最近,一个,无错,状态,寻找,包含,状态,在内,一个,全局,一致,一致性,进程,状态,进程,状态,一致,指,不存,存在,一种,情况,重要,消息,进程,保存,状态,之后,后发,发送,进程,保存,状态,之前,接收,收到,进程,状态,不一,一致,直接,现象,象是,产生,孤儿,进程,定义,m,进程,Pi,发送,发送至,送至,Pj,一条,重要,消息,Pi,保存,发送,m,之前,状态,Ri,Pj,保存,接收,m,之后,状态,Rj,状态,Ri,Rj,不一,一致,重要,消息,m,称为,孤儿,孤儿消息,消息,处于,状态,Rj,进程,Pj,称为,消息,m,引起,孤儿,进程,图,给出,不一,一致,状态,一致,状态,两个,个例,例子,

,图,恢复,进程,状态,进程,重演,确定,确定性,定性,即可,保证,Pi,重演,过程,Pj,重复,复发,发送,消息,m,认为,孤儿,孤儿消息,消息,恢复,过程,消除,Pj,不再,孤儿,进程,乐观,消息,消息日志,日志,方法,解决,进程,状态,不一,一致,问题,手段,要求,消息,接收,收进,进程,容忍,重复,接收,消息,能力,进程,重演,确定,不能,保证,Pi,Pj,发送,同样,内容,消息,m,发送,相同,内容,消息,顺序,以往,不同,Pj,永远,成为,孤儿,进程,对应,应用,进程,考察,两个,发现,应用,消息,引起,孤儿,进程,不作,状态,卷,回,不会,影响,系统,功能,正确,正确性,可能,影响,系统,性能,后面,章节,举出,相应,例子,此类,进程,往往,进程,交互,频繁,单独,这种,进程,进行,分析,优化,可能,一定,意义,进程,关键,状态,应用,不同,不同,进程,状态,进行,重建,系统,进程,之间,存在,着数,数据,冗余,注意,这种,冗余,容错,原因,效率,设计,存在,进行,一定,程度,进程,状态,重建,可能,可能性,节,两个,发现,基础,给出,出进,进程,状态,恢复,优化,策略,优化,策略,下面,考察,交换,软件,资源,资源管理,管理,进程,交换,换系,系统,一类,资源,用户,用户线,中继,中继线,交换,通路,相应,资源,资源管理,管理,进程,负责,负责管理,管理,一般来讲,来讲,呼叫,建立,阶段,呼叫,进程,一定,顺序,逐一,一向,相应,资源,资源管理,管理,进程,申请,资源,得到,满足,之后,建立,连接,呼叫,释放,阶段,再以,一定,次序,释放,资源,决定,资源,资源管理,管理,进程,几乎,呼叫,进程,交互,话音,交换,通路,管理,进程,sp,典型,交互,过程,图,所示,m1,m3,进程,P1,P2,申请,交换,通路,消息,m2,m4,相应,应答,消息,管理,进程,接收,收到,申请,消息,m1,m3,寻找,是否,存在,空闲,话音,交换,通路,存在,空闲,通路,选定,一条,通路,置,忙,之后,申请,请进,进程,返回,通路,编号,m2,不存,存在,空闲,通路,申请,请进,进程,返回,失败,消息,m4,mn,mn+1,释放,放话,话路,过程,mn,携带,带有,释放,放话,话路,编号,话路,管理,进程,话路,置,闲,之后,返回,一个,应答,消息,mn+1,话路,即可,进程,占用,

,图,现在,考虑,进程,P1,k,失效,情况,假设,P1,失效,状态,退回,回到,呼叫,稳态,l,定义,导致,依赖,关系,sp,状态,必须,后退,接收,消息,m1,之前,j,引起,P2,j,状态,依赖,关系,进程,后退,sp,接收,收到,m1,之后,可能,大量,进程,进行,交互,需要,后退,进程,可能,很多,实际,应用,后退,不可,可能,进程,外界,环境,输出,消息,不可,可能,收回,后退,不明,不明智,明智,后退,影响,正在,进行,通话,事实,事实上,不必,进行,sp,状态,后退,需将,P1,卷,回,状态,l,P2,进程,没有,P1,失效,影响,P1,失效,sp,带来,负面,负面效应,效应,仅仅,一条,话路,虚,占,方法,可能,硬件,话音,通路,寄存,寄存器,核对,10,sp,状态,进行,修正,下面,提出,该类,进程,一般性,状态,恢复,复算,算法,考虑,交换,换系,系统,多用,多用户,用户,系统,功能,正确,正确性,定义,进程,有限,状态,自动,自动机,动机,F,Q,E,q0,表示,Q,进程,状态,有限,集合,E,事件,有限,集合,一个,状态,转换,函数,Q,E,Q,q0,进程,初始,初始状态,状态,假设,进程,p,p,p,p,表示,一个,进程,行为,p,p,构成,系统,行为,符号,称为,并发,算子,系统,进程,集合,记为,S,环境,看做,一个,一个多,进程,系统,一个,进程,表示,一个,接受,服务,用户,称为,环境,进程,环境,进程,集合,记为,SENV,引入,迹,概念,相应,算子,迹,一个,进程,行为,迹,事件,一个,有限,序列,连接,算子,ab,两个,迹,a,b,按次,次序,简单,拼到,一起,构成,一个,迹,局限,算子,t,A,表示,迹,t,局限,局限于,限于,集合,A,事件,t,中所,属于,A,事件,去掉,之后,留下,迹,e1,e2,e4,e3,e4,e1,e4,e1,e4,e4,前缀,算子,假设,t,序列,t,一个,初始,子,序列,总能,找到,t,扩展,序列,t,t,定义,t,t,t,t,进程,p,可能,迹,全集,可能,能事,事先,先知,知道,定义,函数,Trace,p,产生,集合,定义,进程,p,功能,进程,p,正确,

,Comm,p,p,表示,p,p,交互,事件,集合,称,系统,系统对,用户,p,功能,正确,定义,系统,功能,正确,
p,SENV,系统,系统对,用户,p,功能,正确,定义,系统,功能,正确,正确性,单个,用户,视角,看待,系统,行为,摆脱,有用,用户,进程,一个,一个整,整体,对系统,系统,要求,显然,用户,进程,相互,独立,应用,系统,系统,功能,正确,等价,功能,正确,所谓,进程,相互,独立,指,进程,状态,之间,不存,存在,依赖,关系,交换,换系,系统,一次,次呼叫,呼叫,所涉,涉及,有用,用户,看成,一个,用户,进程,考虑,用户,进程,之间,资源,资源共享,共享,问题,用户,进程,之间,相互,独立,必要,单独,资源,资源管理,管理,进程,加以分析,分析,用户,进程,资源,资源管理,管理,进程,相互,相互影响,影响,分为,两种,情况,影响,分配,分配资源,资源,编号,占,绝大,绝大多数,大多,大多数,多数,影响,资源,资源分配,分配,成功,占,极小,比率,用户,进程,角度,两种,影响,均,忽略,强行,指定,这种,影响,不存,存在,资源,资源管理,管理,进程,收到,资源,请求,消息,标记,记为,重要,消息,导出,用户,进程,之间,独立,思路,应用,系统,特点,划分,分用,用户,进程,概念,初步,初步判断,判断,系统,功能,正确,是否,已经,足够,该判,判断,断成,成立,定义,系统,进程,交互,关系,推断,推断出,导致,导致用户,致用,用户,进程,依赖,关系,进程,链,相应,消息,逐一,一对,进程,链,进程,进行,分析,判断,进程,接收,相应,消息,导致,状态,变化,用户,进程,影响,认为,这种,影响,忽略,消息,标记,记为,重要,消息,割断,用户,进程,之间,依赖,关系,没有,标记,消息,认为,该系,系统,不适,适合,合于,依赖,关系,优化,上步,步骤,进程,设计,完成,之后,后进,进行,系统,恢复,依赖,依赖于,赖于,重要,消息,形成,依赖,关系,进程,p,保存,一个,消息,编号,向量,M,m1,m2,mN,mi,记载,进程,i,发给,p,最近,一次,消息,编号,mp,进程,p,发送,消息,编号,p,发送,一次,消息,mp,并作,消息,一部,一部分,部分,分发,发送,发送至,送至,目的,进程,进程,接收,收到,一条,消息,之后,消息,内容,附带,消息,编号,修改,改自,消息,编号,向量,量值,正常,常情,情况,同一,进程,接收,收到,连续,消息,编号,应该,该是,递增,接收,收到,消息,编号,小于,等于,向量,对应,消息,编号,说明,消息,发送,送进,进程,产生,后退,进程,p,系统,恢复,完成,之后,后发,发现,相关,关进,进程,后退,采用,恢复,思想,进程,p,状态,进行,修正,本文,提供,一个,可能,解决,解决方案,方案,p,暂停,正常,处理,启动,一个,对话,对话,进程,具有,有数,数据,耦合,关系,关进,进程,发送,请求,消息,收集,状态,恢复,必须,数据,消息,得到,响应,p,状态,得到,修正,对话,结束,p,继续,正常,处理,对话,启动,选,一个,系统,负荷,很轻,时间,时间段,交换,换系,系统,考虑,凌晨,启动,对话,尽可,尽可能,可能,减轻,状态,修正,对系统,系统,影响,交换,换系,系统,针对性,恢复,复方,方法,文,给出,状态,恢复,复算,算法,已有,算法,文献,基础,扩充,略,分析,算法,应用,用于,协作,恢复,可能,能带,带来,好处,一个,典型,执行,过程,图,a,所示,进程,p1,p2,p3,p,之间,交互,构成,C1,进程,p4,p5,p6,p,之间,交互,构成,C2,图,看出,C1,C2,存在,共同,参与,进程,p,C1,C2,必须,串行,方式,执行,进程,应用,上述,算法,图,b,所示,方式,执行,原因,定义,重要,消息,i1,i2,进程,p,不必,进程,回,滚,回,滚,

,图,协作,恢复,复方,方法,应用,算法,好处,图,说明,已经,看到,不再,赘述,讨论,消息,语义,概念,Leong,Agrawal,提出,注意,消息,提交,可能,不会,导致,接收,收进,进程,状态,改变,不会,引起,进程,状态,消息,依赖,本文,此基础,基础,做,进一步,一步,扩充,指出,特定,应用,进程,消息,接收,收进,进程,状态,发生,改变,导致,进程,状态,消息,依赖,依赖性,相比,相比之下,之下,Leong,方法,重要,消息,判定,需要,应用,进程,设计,设计者,参与,利用,静态,数据,数据流,分析,动态,执行,算法,手段,实现,方法,重要,消息,需要,设计,人员,应用,进程,语义,给出,并发,发性,J,Xu,提出,一种,称之为,之为,协作,原子,动作,CA,模型,11,模型,事务,事务处,事务处理,处理,中分,分离,离开,开来,称为,外部,原子,对象,认为,外部,原子,对象,并发,发性,控制,错误,恢复,应,单独,考虑,本文,思想,相近,之处,本文,方法,结合,应用,进程,特点,提出,作者,认为,特定,应用,特定,数据,数据结构,结构,制定,定出,容忍,特定,软件,错误,方法,更,实际,本文,研究,得到,国家,国家教委,家教,教委,博士,博士点,基金,资助,本文,通讯,通讯联系,联系,联系人,王,准,北京,100086,北京,北京市,京市,9628,信箱,41,分箱,0901,室,作者,作者简介,简介,王,准,1971,生,博士,主要,研究,领域,软件,容错,通信,通信软件,软件,分布,分布式,分布式系统,布式,系统,陈,俊,亮,1933,生,教授,博士,博士生,导师,中国,中国科学院,科学,科学院,学院,院士,中国,中国工程院,工程,工程院,院士,主要,研究,领域,程控,交换,换系,系统,智能,智能网,通信,通信软件,软件,作者,单位,王,准,南方,通信,惠州,实业,有限,有限公司,公司,北京,研究,研究所,北京,100086,王,准,陈,俊,亮,北京,北京邮电,北京邮电大学,邮电,邮电大学,电大,大学,程控,交换,技术,通信,通信网,国家,重点,实验,实验室,北京,100876,E,mail,wangzhun,263,net
,参考,参考文献,文献,Randell,B,System,structure,for,software,fault,tolerance,IEEE,Transactions,on,Software,Engineering,1975,220,232
,Anderson,T,Knight,J,C,A,framework,for,software,fault,tolerance,in,real,time,systems,IEEE,Transactions,on,Software,Engineering,1983,355,364
,Lamport,L,Time,clocks,and,the,ordering,of,events,in,a,distributed,system,Communication,of,the,ACM,1978,21,558,565
,Birman,K,Schiper,A,Stephenson,P,Lightweight,causal,and,atomic,group,multicast,ACM,Transactions,on,Computer,Systems,1991,272,314
,Johnson,D,B,Zwaenepoel,W,Recovery,in,distributed,systems,using,optimistic,message,logging,and,checkpointing,Journal,of,Algorithms,1990,11,462,491
,Wang,Y,M,Consistent,global,checkpoints,that,contain,a,given,set,of,local,checkpoints,IEEE,Transactions,on,Computers,1997,46,456,468
,Cristian,F,Understanding,fault,tolerant,distributed,systems,Communication,of,ACM,1991,34,56,78
,Leong,H,V,Agrawal,D,Using,message,semantics,to,reduce,rollback,in,optimistic,message,logging,recovery,schemes,In,Proceedings,of,the,14th,International,Conference,on,Distributed,Computing,System,Los,Alamitors,CA,IEEE,Computer,Society,Press,1994,227,234
,Strom,R,Yemini,S,Optimistic,recovery,in,distributed,systems,ACM,Transactions,on,Computer,Systems,1985,204,226
,10,Nakamura,R,Ono,H,et,al,Reliable,switching,system,recovery,In,1994,IEEE,GLOBCOM,NJ,IEEE,Inc,1994,1596,1600
,11,Xu,Jie,Randell,B,Romanovsky,A,et,al,Fault,tolerance,in,concurrent,object,oriented,software,through,coordinated,error,recovery,In,Proceedings,of,the,25th,International,Symposium,on,Fault,Tolerant,Computing,Digest,of,Papers,Los,Alamitors,CA,IEEE,Computer,Society,Press,1995,499,508
,本文,1997,12,05,收到,原稿,1998,04,17,收到,修改,修改稿,改稿