软件,学报,
JOURN,AL,OF,SOFTWARE
1999,10,卷,10,Vol,10,No,10,1999



,工作,工作站,站网,网络,网络系统,系统,进程,迁移,机制,裴,丹,汪,东升,沈,美,明,摘要,进程,迁移,工作,工作站,站网,网络,网络系统,系统,实现,负载,负载平衡,平衡,提高,系统,可用,可用性,性功能,功能,重要,手段,该文,提出,一种,接收,发送,消息,记录,进程,迁移,技术,消息,消息传递,传递,库,PVM,parallel,virtual,machine,之上,实现,具有,用户,用户程序,程序,透明,可移植,可移植性,移植,移植性,开销,实现,简单,特点,技术,实际,应用,用于,作者,自行,研制,并行,并行程序,行程,程序,程序运行,运行,回,卷,恢复,进程,迁移,系统,ChaRM,checkpointing,based,rollback,recovery,and,migration,system,关键,关键词,进程,迁移,工作,工作站,站网,网络,PVM,进程,状态,中图,中图法,图法,分类,分类号,TP393
Process,Migration,for,the,Network,of,Workstations
PEI,Dan,WANG,Dong,sheng,SHEN,Mei,ming
,Department,of,Computer,Science,and,Technology,Tsinghua,University,Beijing,100084,
Abstract,Process,migration,is,an,important,tool,on,NOWs,network,of,workstations,for,load,balancing,and,high,availability,In,this,paper,the,authors,present,a,log,based,approach,to,provide,process,migration,for,parallel,applications,Because,this,approach,is,implemented,on,top,of,PVM,parallel,virtual,machine,it,is,transparent,to,users,and,portable,This,approach,has,been,used,in,the,ChaRM,checkpointing,based,rollback,recovery,and,process,migration,system,system,The,experiments,show,that,the,overhead,is,low,
Key,words,Process,migration,network,of,workstations,NOW,PVM,parallel,virtual,machine,process,state,工作,工作站,站网,网络,NOW,系统,结点,负载,分布,情况,很大,大程,大程度,程度,影响,系统,执行,效率,进程,迁移,技术,能动,动态,改变,系统,负载,分布,支持,支持系统,系统,动态,负载,负载平衡,平衡,合理,有效,地利,利用,资源,提高,系统,整体,整体性,体性,性能,系统,可用,可用性,关键,关键技术,技术,文献,指出,利用,进程,迁移,计算,过程,进程,负载,较重,结点,迁移,移到,负载,较轻,结点,实现,动态,负载,负载平衡,平衡,充分,充分利用,分利,利用,NOW,空闲,闲工,工作,工作站,主人,要求,独占,工作,工作站,资源,及时,迁出,出进,进程,长时间,时间,计算,过程,以使,结点,退出,计算,进行,系统,系统维护,维护,提高,系统,可用,可用性,I,O,操作,设备,结点,上进,进行,减少,网络,网络通信,通信,通信量,PVM,parallel,virtual,machine,一个,应用,广泛,并行,编程,环境,没有,支持,进程,迁移,PVM,通信,库,功能,进行,扩充,开发,一个,检查,检查点,查点,机制,并行,并行程序,行程,程序,程序运行,运行,回,卷,恢复,进程,迁移,系统,ChaRM,checkpointing,based,rollback,recovery,and,migration,system,ChaRM,系统,提供,并行,并行计算,计算,计算环境,环境,容错,功能,进程,迁移,功能,并能,负载,负载平衡,平衡,调度,工具,相结合,结合,实现,工作,工作站,站网,网络,网络系统,系统,智能,智能化,资源,资源管理,管理,进程,状态,指,保证,进程,迁移,之后,能够,继续,正确,执行,必需,信息,进程,状态,应该,包括,进程,数据,段,用户,栈,内容,应,包括,程序,计数,计数器,PC,处理,处理机,机状态,状态,状态字,PSW,栈,指针,SP,内容,活动,文件,信息,中断,信号,信息,进程,迁移,迁移,进程,捕获,进程,状态,直接,接通,UNIX,socket,通道,传给,系统,目标,结点,创建,一个,骨架,进程,骨架,进程,socket,通道,读出,出进,进程,状态,进程,空间,重建,状态,进程,状态,传输,输完,完毕,迁移,进程,自动,终止,骨架,进程,代替,继续,运行,并行,系统,必须,保证,迁移,进程,原来,任务,号,访问,迁移,进程,对应,骨架,进程,保证,迁移,迁移,过程,中发,发往,迁移,进程,消息,能够,正确,顺序,接收,造成,消息,丢失,引起,起程,程序,程序执行,执行,错误,丢失,消息,处理,进程,迁移,过程,迁移,进程,骨架,进程,任务,号,不同,引起,几种,消息,丢失,情况,图,所示,进程,迁移,t0,时刻,t1,时刻,结束,进程,t0,t1,可能,不一,MP,代表,迁移,进程,SP,代表,MP,目标,结点,对应,骨架,进程,NMP,代表,应用,应用程序,程序,迁移,进程,迁移,过程,MP,挂起,NMP,继续,运行,迁移,结束,MP,消亡,SP,代替,MP,应用,应用程序,程序,参与,计算,

,图,进程,迁移,可能,造成,消息,丢失,图,a,NMP,t1,时刻,之后,MP,发送,消息,m1,找,不到,接收,收方,MP,SP,无法,收到,消息,m1,丢失,NMP,t1,时刻,之后,等待,MP,消息,SP,发来,消息,m2,发,MP,NMP,无法,接收,m2,丢失,避免,两种,完全,全由,迁移,造成,进程,任务,号,改变,导致,丢失,消息,支持,进程,迁移,系统,采用,一种,MP,SP,任务,号,之间,匹配,配机,机制,这种,机制,系统,维护,MP,SP,之间,任务,号,匹配,表,进程,MP,通信,匹配,表,查到,对应,SP,任务,号,SP,进行,实际,通信,解决,m1,m2,丢失,单纯,任务,号,匹配,配机,机制,不能,处理,图,b,m3,图,c,m4,丢失,消息,NMP,t0,t1,时刻,之间,MP,发送,m3,本次,迁移,导致,任务,号,变化,无法,反映,NMP,当时,匹配,表,m3,发往,MP,发往,SP,MP,已经,停止,计算,t1,时刻,之后,消亡,无法,收到,m3,消息,m3,丢失,图,c,m4,m5,t0,时刻,之前,已经,发送,送出,送出去,出去,接收,收进,进程,尚未,未收,收到,消息,m3,情况,类似,NMP,发送,m4,并不知道,不知,知道,任务,号,变化,m4,发往,MP,丢失,消息,m5,采用,任务,号,匹配,配机,机制,产生,丢失,消息,t1,时刻,之后,NMP,查询,匹配,表,等待,接收,收发,发自,SP,消息,无法,收到,发自,MP,消息,m5,消息,m5,丢失,多个,进程,进行,迁移,迁移,进程,之间,丢失,消息,图,中所,所示,类似,t0,t1,时刻,之间,发送,应用,消息,不存,存在,m3,一类,消息,支持,进程,迁移,系统,有如,几种,维护,任务,号,匹配,表,方法,直接,接在,每个,用户,进程,维护,这种,方法,不依,依赖,依赖于,赖于,特定,并行,环境,每个,用户,进程,虚,存,空间,增长,要同,更新,匹配,表,维护,匹配,表,内容,唯一,唯一性,并行,编程,环境,系统,每个,结点,daemon,pvmd,进程,维护,这种,方法,一种,方法,更,节省,空间,匹配,表,更新,容易,需要,修改,并行,编程,环境,系统,源码,可移植,可移植性,移植,移植性,差,每个,结点,增加,一个,管理,进程,专门,负责,维护,匹配,表,接管,进程,通信,这种,方法,不依,依赖,依赖于,赖于,特定,并行,环境,进程,间通信,通信,频繁,情况,下有,可能,能成,成为,系统,瓶颈,处理,m3,m4,m5,丢失,消息,方法,两种,同步,方式,迁移,整个,过程,挂起,NMP,暂停,计算,m3,消息,根本,不会,出现,传输,输进,进程,状态,MP,NMP,阻塞,接收,m4,m5,避免,两类,消息,丢失,这种,方式,实现,简单,迁移,导致,整个,应用,应用程序,程序,暂停,计算,开销,效率,低,异步,方式,这种,方式,允许,NMP,迁移,过程,中继,继续,运算,避免,丢失,m3,m4,m5,一类,消息,MPVM,系统,引入,复杂,消息,转发,排序,机制,这种,方式,执行,效率,效率高,实现,复杂,需要,修改,并行,编程,环境,系统,源代码,代码,ChaRM,系统,进程,迁移,ChaRM,系统,设计,一种,新,进程,迁移,机制,允许,NMP,迁移,过程,中继,继续,计算,迁移,移开,结束,进行,简单,协调,工作,支持,不同,并行,环境,之间,可移植,可移植性,移植,移植性,ChaRM,系统,统由,一个,专门,管理,进程,C,Manager,进程,负责,系统,总体,控制,处理,图,几种,消息,丢失,ChaRM,系统,采取,PVM,函数,数封,封装,任务,号,隐,式,匹配,消息,驱赶,消息,延迟,发送,技术,PVM,函数,封装,执行,真正,PVM,函数,进行,额外,工作,完成,ChaRM,系统,功能,提供,供给,用户,接口,原,PVM,函数,接口,完全,完全一致,一致,这种,封装,技术,避免,PVM,源码,直接,修改,ChaRM,做,工作,作对,用户,透明,任务,号,隐,式,匹配,ChaRM,每个,用户,进程,空间,维护,一个,任务,号,匹配,表,进程,每次,通信,先查,查询,匹配,表,进行,真正,通信,迁移,结束,更新,进程,匹配,表,整个,计算,过程,应用,应用程序,程序,需知,知道,进程,创建,任务,号,完全,不必,知道,进程,是否,发生,生过,迁移,这种,机制,有效,避免,图,m1,m2,一类,消息,丢失,消息,驱赶,机制,ChaRM,利用,PVM,通信,机制,FIFO,语义,一个,进程,一个,进程,消息,通道,清空,假设,设在,迁移,过程,A,进程,B,进程,发送,一个,特殊,就绪,消息,不再,B,发送,消息,B,进程,等待,接收,就绪,消息,接收,收到,应用,消息,妥善,保存,存到,预先,预先指定,指定,接收,缓冲,FIFO,语义,B,进程,收到,到来,A,进程,就绪,消息,推断,A,进程,B,进程,单向,通信,信通,通道,消息,驱赶,B,进程,这种,收方,消息,记录,避免,图,m4,m5,丢失,保证,正确,消息,接收,顺序,消息,延迟,发送,发送机,送机,机制,避免,产生,图,消息,m3,ChaRM,PVM,消息,发送,函数,进行,封装,得当,NMP,t0,t1,时刻,之间,MP,发送,应用,消息,进行,真正,发送,消息,记录,录到,一个,延迟,发送,消息,表,迁移,完毕,更新,匹配,表,延迟,发送,消息,表,应用,消息,发送,送出,送出去,出去,实际,实际上,一种,发,消息,记录,算法,ChaRM,系统,迁移,算法,C,Manager,IF,接收,收到,迁移,发起,信号,MIGRATE,SIG,THEN,MP,发出,迁移,启动,信号,MIG,CHECK,SIG,NMP,发出,迁移,协调,信号,MIG,SYNC,SIG,MP,IF,收到,MIG,CHECK,SIG,THEN,暂停,计算,建立,立起,一个,用于,SP,通信,socket,管道,C,Manager,发送,PRT,MSG,通知,socket,地址,端口,端口号,口号,信息,进程,发送,就绪,消息,RDY,MSG,持续,续接,接收,发送,消息,直至,收到,到来,进程,RDY,MSG,IF,收到,RDY,MSG,以外,消息,驱赶,而来,中途,应用,消息,THEN
,消息,保存,存到,预先,预先指定,指定,接收,缓冲,NMP,IF,收到,MIG,SYNC,SIG,THEN,MP,发送,就绪,消息,RDY,MSG,继续,进行,计算,IF,迁移,完毕,之前,MP,发送,应用,消息,THEN,消息,记录,录到,延迟,发送,消息,表,进行,真正,发送,C,Manager,IF,收到,MP,发来,PRT,MSG,消息,THEN
,目标,结点,派生,生出,MP,对应,骨架,进程,SP,MP,socket,地址,端口,口信,信息,PRT,MSG,传送,送给,骨架,进程,MP,IF,已经,收到,进程,发来,RDY,MSG,THEN
,等待,相应,SP,建立,socket,连接,捕获,进程,状态,进程,状态,socket,传给,骨架,进程,状态,传输,输完,完毕,消亡,SP,IF,收到,C,Manager,发来,PRT,MSG,THEN,相应,MP,建立,socket,连接,socket,读出,出进,进程,状态,进程,空间,重建,状态,任务,号,变化,RJN,MSG,通知,C,Manager,C,Manager,IF,收到,SP,发来,RJN,MSG,THEN,NMP,再次,发送,MIG,SYNC,SIG,进程,发送,LST,MSG,用于,进程,更新,任务,号,匹配,表,NMP,IF,收到,MIG,SYNC,SIG,信号,THEN
,持续,续接,接收,发送,消息,直至,收到,发自,MP,RDY,MSG,IF,收到,RDY,MSG,以外,消息,驱赶,而来,中途,应用,消息,THEN
,消息,保存,存到,预先,预先指定,指定,接收,缓冲,接收,C,Manager,发来,LST,MSG,更新,任务,号,匹配,表,新,匹配,表,延迟,发送,消息,表,延迟,发送,消息,发送,送出,送出去,出去,继续,继续执行,执行,SP,IF,接收,收到,C,Manager,发来,LST,MSG,THEN,更新,新任,任务,号,匹配,表,继续,继续执行,执行,算法,MP,进程,发送,就绪,消息,NMP,MP,发送,MP,进程,发送,应用,消息,驱赶,赶到,缓冲,缓冲区,NMP,继续,进行,计算,不在,进行,消息,驱赶,是因为,进程,发送,消息,工作,推迟,迟到,做,以使,NMP,消息,驱赶,所花,花费,开销,最小,NMP,消息,驱赶,完毕,延迟,发送,消息,发送,送出,送出去,出去,继续,继续执行,执行,这种,延迟,发送,发送机,送机,机制,带来,附加,加开,开销,很小,两方,原因,NMP,执行,完,消息,发送,送命,命令,不必,理会,接收,收进,进程,是否,收到,继续,计算,发送,应用,消息,不在,NMP,执行,关键,路径,这种,机制,NMP,计算,过程,直接,影响,延迟,发送,消息,迁移,完毕,立即,发送,送出,送出去,出去,MP,迁移,完毕,继续,计算,接收,应用,消息,不会,长时间,时间,等待,接收,收发,发自,NMP,应用,消息,明显,明显增加,增加,执行,行时,时间,同步,方式,进程,迁移,NMP,开销,MP,开销,大致,相当,算法,NMP,迁移,发起,迁移,结束,做,协调,工作,以外,一直,处于,计算,过程,开销,远,小于,同步,方式,异步,方式,进程,迁移,NMP,没有,明显,协调,工作,这种,方式,引入,复杂,消息,转发,排序,机制,应用,应用程序,程序,正常,运行,带来,一定,开销,算法,NMP,迁移,过程,参与,协调,调为,代价,算法,易于,实现,正常,运行,开销,小于,异步,方式,算法,发送,接收,收方,消息,记录,算法,有效,结合,同步,方式,易于,实现,异步,方式,效率,效率高,优点,性能,测试,测试,测试环境,环境,台,SUN,Ultra2,每个,结点,两个,CPU,主频,200MHz,100M,快速,以太,以太网,连接,工作,工作站,站网,网络,网络系统,系统,操作,操作系统,系统,Solaris2,测试,测试用例,试用,计算,密集,密集型,矩阵,幂,程序,程序,一个,任务,结点,各派,派生,生出,两个,个子,任务,总共,个子,任务,测试,表,所示,状态,空间,指,socket,传送,进程,状态,信息,总和,挂起,挂起时间,时间,指,MP,源,结点,暂停,计算,算到,目标,结点,继续,计算,计算所,所花,花费,时间,等于,状态,传输,时间,加上,协调,时间,MP,协调,时间,指,网络,上进,进行,行进,进程,状态,传输,以外,进行,工作,所花,花费,时间,包括,括发,发送,接收,就绪,消息,C,Manager,通信,骨架,进程,派生,维护,任务,号,匹配,表,工作,NMP,最大,协调,时间,指,NMP,进程,迁移,所花,花费,时间,最大,最大值,大值,包括,括发,发送,接收,就绪,消息,C,Manager,通信,延迟,发送,消息,维护,任务,号,匹配,表,工作,表,矩阵,幂,程序,进程,迁移,迁移开销,移开,开销,

,状态,空间,MBytes,挂起,时间,s,状态,传输,时间,s,协调,时间,s,NMP,最大,协调,时间,ms,680,4180,2190,1892,0
2,000,4380,2530,1851,7
3,010,5840,3680,1962,6
4,000,6610,4720,1892,5
5,000,7590,5650,1943,010,9380,6840,2545,8
7,011,0390,8190,2207,5
8,021,1200,9160,2042,6



,表,看出,进程,状态,传输,时间,挂起,挂起时间,时间,主体,部分,进程,状态,空间,增加,大致,呈,线性,增加,波动,网络,传输,波动,所致,这部,这部分,部分,分开,开销,大小,主要,取决,取决于,网络,硬件,协调,时间,进程,状态,空间,增加,呈,增加,趋势,变化,不显,显著,2s,左右,协调,工作,进程,状态,空间,关系,很小,所致,图,更直,直观,看出,MP,各部,部分,分开,开销,状态,空间,关系,表,NMP,协调,时间,很小,MP,挂起,挂起时间,时间,相差,两个,量级,验证,算法,分析,NMP,开销,远,小于,同步,方式,毫秒,级,协调,调开,开销,避免,实现,复杂,异步,方式,进程,迁移,完全,接受,一开,开销,逐渐,渐变,变大,趋势,传输,较大,进程,状态,空间,导致,网络,网络通信,通信,变慢,所致,

,图,矩阵,幂,程序,MP,迁移,迁移开销,移开,开销,折线,折线图,线图,程序,进行,测试,表,偏微分,微分,微分方程,方程,哈达,码,变换,换为,计算,密集,密集型,ASE,分数,维,FFT,通信,密集,密集型,看出,计算,密集,密集型,通信,密集,密集型,MP,协调,时间,上区,区别,很小,证明,消息,驱赶,延迟,发送,发送机,送机,机制,效率,高,通信,密集,密集型,应用,应用程序,程序,NMP,保存,重发,消息,计算,密集,密集型,以其,协调,时间,一定,增加,增加,状态,空间,大小,影响,表,应用,应用程序,程序,进程,迁移,迁移开销,移开,开销,

,应用,应用程序,程序,状态,空间,MBytes,挂起,时间,s,状态,传输,时间,s,协调,时间,s,NMP,最大,协调,时间,ms,哈达,码,变换,60,4380,2120,2152,偏微分,微分,微分方程,方程,20,4710,2730,1963,分数,维,70,4370,2250,2043,3
ASE8,01,0880,8640,2231,9
FFT3,70,4450,6790,2344,4
FFT22,12,2322,4450,2116,2
FFT66,17,3487,6870,2497,6

,相关,工作,结论,进程,迁移,并行,系统,得到,支持,应用,早期,系统,Charlotte,V,system,Mosix,Sprite,Mach,大都,修改,操作,操作系统,系统,内核,系统,级,实现,进程,迁移,支持,这种,方法,效率,效率高,透明,透明性,明性,可移植,可移植性,移植,移植性,差,用户,级,实现,进程,迁移,使用,标准,UNIX,系统,调用,可移植,可移植性,移植,移植性,MPVM,修改,PVM,源码,引入,复杂,消息,转发,排序,机制,支持,异步,步进,进程,迁移,Condor,支持,进程,迁移,进程,检查,检查点,查点,文件,存入,磁盘,中止,进程,系统,找到,空闲,机,该机,机上,恢复,CoCheck,利用,Condor,提供,进程,检查,检查点,查点,设置,卷回恢复,恢复,复工,工具,PVM,通信,库,之上,实现,支持,同步,方式,进程,迁移,DPVM,利用,进程,迁移,进一步,一步,支持,动态,调度,功能,国际,同类,工作,相比,ChaRM,系统,具有,下面,功能,设计,特点,用户,用户程序,程序,透明,运行,行时,库,方式,提供,供给,用户,用户,需将,ChaRM,提供,库,原有,PVM,应用,应用程序,程序,链接,即可,可用,命令,方式,API,函数,函数调用,调用,进程,迁移,功能,并行,编程,环境,通信,库,实现,专门,管理,进程,C,Manager,选择,PVM,资源,资源管理,管理,管理器,理器,RM,负责,总体,控制,不受,受限,受限于,限于,特定,并行,编程,环境,可移植,可移植性,移植,移植性,引入,消息,驱赶,消息,延迟,发送,发送机,送机,机制,支持,一种,新,收,发,消息,记录,迁移,技术,提高,高迁,迁移,效率,未,采用,复杂,消息,转发,排序,机制,支持,手工,半自动,自动,全自动,自动,方式,进程,迁移,发起,发起方,方式,用户,指定,进程,迁往,结点,提出,进程,迁移,请求,系统,决定,迁往,结点,系统,自行,自行决定,决定,迁移,发起,时机,迁移,进程,目的,结点,进程,状态,进行,精简,排除,数据,段,不必,必保,保存,区域,减少,迁移,引起,状态,捕获,传输,重建,时空,开销,本文,提出,进程,迁移,技术,PVM,MPI,多种,消息,消息传递,传递,库,实现,采用,任务,号,隐,式,映射,消息,驱赶,消息,延迟,发送,技术,一种,接收,发送,消息,记录,迁移,技术,具有,实现,简单,对应,应用,应用程序,程序,透明,可移植,可移植性,移植,移植性,开销,特点,一步,工作,ChaRM,系统,设计,实现,动态,负载,负载平衡,平衡,调度,算法,工作,工作站,站网,网络,网络系统,系统,进行,智能,智能化,资源,资源管理,管理,注释,本文,研究,得到,国家,863,高科技,科技,项目,基金,资助,作者,作者简介,简介,裴,丹,1973,生,硕士,硕士生,主要,研究,领域,并行,分布,系统,容错,负载,负载平衡,平衡,汪,东升,1966,生,博士,副教授,教授,主要,研究,领域,并行,并行处理,处理,容错,计算,沈,美,明,女,1938,生,教授,博士,博士生,导师,主要,研究,领域,并行,分布,计算,计算机,计算机系,计算机系统,算机,机系统,系统,作者,单位,清华,清华大学,华大,大学,计算,计算机,计算机科学,算机,科学,技术,系,北京,100084
E,mail,peidan,mail,cic,tsinghua,edu,cn
,参考,参考文献,文献,Eskicioglu,M,R,Design,issues,of,process,migration,facilities,in,distributed,systems,IEEE,Technical,Committee,on,Operating,Systems,Newsletter,1989,13
2,Casas,J,Clark,D,L,et,al,MPVM,a,migration,transparent,version,of,PVM,Computing
,Systems,1995,171,216
3,Litzkow,J,et,al,Condor,a,hunter,of,idle,workstations,In,Proceedings,of,the,8th
,IEEE,International,Conference,on,Distributed,Computing,Systems,Los,Alamitos,CA,IEEE,Computer,Society,Press,1988,104,111
4,Tannenbaum,T,Litzkow,M,The,condor,distributed,processing,system,Dr,Dobb,s,Journal,1995,40,48
5,Stellner,G,Pruyne,J,Resource,management,and,checkpointing,for,PVM,In,Proceedings,of,the,2nd,European,PVM,Users,Group,Meeting,Lyon,France,Edition
,Hermes,1995,131,136
6,鞠,九,滨,魏,晓,辉,徐,高潮,DPVM,支持,任务,迁移,排队,PVM,计算,计算机,算机,学报,1997,20,10,872,877
,Ju,Jiu,bin,Wei,Xiao,hui,Xu,Gao,chao,et,al,DPVM,an,enhanced,PVM,supporting,task,migration,and,queuing,Chinese,Journal,of,Computers,1997,20,10,872,877,收稿,日期,1998,07,20,修,稿,日期,1998,10,09
