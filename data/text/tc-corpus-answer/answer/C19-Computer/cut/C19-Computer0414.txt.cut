信息,控制,
Information,and,Control
1999,28,卷,Vol,28,No,1999



,基金,基金会,现场,总线,数据,数据链,链路,链路层,工作,机理,其实,实现,

,胥,川,王,宏,王,智,

,摘,本文,概要,介绍,基金,基金会,现场,总线,网络,网络结构,结构,主要,讨论,基金,基金会,现场,总线,数据,数据链,链路,链路层,工作,机理,其实,实现,关键,关键词,现场,总线,基金,基金会,现场,总线,协议,网络,工业,控制,中图,分类,分类号,TP319,文献,标识,标识码,B

THE,MECHANISM,OF,FOUNDATION,FIELDBUS,DATA,LINK,LAYER
AND,ITS,IMPLEMENTATION
XU,Zheng,chuan,WANG,Hong,WANG,Zhi
,Computer,Center,Shenyang,Institute,of,Automation,Chinese,Acade,my,of,Sciences,
Abstract,The,outline,of,the,network,architecture,of,foundat,ion,fieldbus,is,introduced,the,mechanism,and,implementation,of,foundation,field,bus,data,link,layer,is,primarily,discussed,
Key,words,fieldbus,foundation,fieldbus,protocol,network,ind,ustry,control

1,引言,近年,近年来,年来,基金,基金会,现场,总线,Foundation,Fieldbus,技术,蓬勃,蓬勃发展,勃发,发展,技术,引起,工程,工程界,普遍,关注,越来,越来越,越多,关人,人员,进行,大量,研究,开发,本文,概要,介绍,基金,基金会,现场,总线,网络,网络结构,结构,主要,论述,基金,基金会,现场,总线,数据,数据链,链路,链路层,网络,网络结构,结构,工作,机理,其实,实现,基金,基金会,现场,总线,网络,网络通讯,通讯,结构,基金,基金会,现场,总线,使用,事先,组态,通讯,讯通,通道,称为,虚拟,通讯,关系,简称,VCR,设备,之间,传送,送信,信息,基金,基金会,现场,总线,线规,规范,定义,三种,种类,类型,VCR,A,发布,订阅,Publisher,Subscriber,VCR
,数据,发布,发布者,广播,播到,网络,订阅,侦听,网络,数据,广播,收取,相关,信息,VCR,缓冲,网络,触发,单向,BNU,缓冲,指,过数,数据,数据链,链路,链路层,发送,送与,接受,缓冲,缓冲区,发送,接受,消息,网络,触发,指,照数,数据,数据链,链路,链路层,调度,发送,消息,调度,链路,活动,调度,器,LAS,维护,强制,实现,单向,指,一个,多个,接收,发送,无须,确认,消息,数据,单向,传送,B,客户,服务,服务器,务器,Client,Server,VCR
,客户,发出,一个,请求,服务,服务器,务器,作出,响应,不同,VCR,一个,设备,以是,客户,以是,服务,服务器,务器,VCR,排队,用户,触发,双向,QUB,排队,指,过数,数据,数据链,链路,链路层,发送,接收,收队,队列,发送,接收,消息,用户,触发,指,上层,用户,发出,发出请求,请求,客户,客户端,动作,是非,调度,即是,调度,调度表,规定,时间,收到,通行,行令,令牌,PT,数据,发送,送出,送出去,出去,双向,指,客户,和服,服务,服务器,服务器之间,务器,之间,进行,确认,请求,求和,应答,有此,此类,VCR,双向,C,报告,分发,Report,Distribution,VCR
,事件,事件报告,报告,源,设备,广播,播到,网络,收集,设备,侦听,接收,VCR,排队,用户,触发,单向,QUU,排队,指,过数,数据,数据链,链路,链路层,发送,接收,收队,队列,发送,接收,消息,用户,触发,指,上层,用户,发出,发出请求,请求,数据,数据链,链路,链路层,动作,是非,调度,即是,调度,调度表,规定,时间,收到,通行,行令,令牌,PT,数据,发送,送出,送出去,出去,单向,指事,事件,事件报告,报告,网络,广播,不要,要求,确认,收方,收,发,支持,VCRs,国际,国际标准,国际标准化组织,标准,标准化,组织,ISO,OSI,参考,参考模型,模型,七层,协议,议标,标准,基金,基金会,现场,总线,系统,系统结构,结构,定义,三层,通讯,结构,第一,第一层,一层,物理,物理层,规定,信号,传送,第二,第二层,二层,数据,数据链,链路,链路层,规定,网络,设备,共享,调度,第三,第三层,三层,应用,应用层,规定,通讯,报文,报文格式,格式,其三,三层,结构,图,所示,

,图,现场,总线,总线网,线网,网络,网络体系,网络体系结构,体系,体系结构,结构,数据,数据链,链路,链路层,概述,数据,数据链,链路,链路层,定义,数据,数据链,链路,链路层,DLL,基金,基金会,现场,总线,处于,第二,第二层,二层,物理,物理层,传,信息,基础,相邻,节点,传送,称为,帧,数据,信息,DLL,可能,传输,中出,出现,差错,需,进行,行检,检错,纠错,向上,上层,提供,无错,透明,传送,数据,数据链,链路,链路层,软件,协议,栈,基本,软件,基金,基金会,现场,总线,DLL,定义,一系,一系列,系列,服务,应用,应用层,功能,向下,物理,物理层,接口,使用,物理,物理层,服务,DLL,提供,原语,服务,相关,事件,原语,服务,相关,事件,参数,及格,格式,服务,事件,相互,相互关系,关系,DLL,用户,提供,可靠,透明,数据,据传,送,服务,基金,基金会,现场,总线,总线网,线网,网络,网络结构,结构,数据,数据链,链路,链路层,作用,尤为,尤为重要,为重,重要,连接,接到,同一,一物,物理,通道,应用,进程,实际,实际上,链路,链路层,实时,管理,协调,工业,过程,中实,实时,实时性,重要,重要性,现场,总线,采用,集中,集中式,中式,管理,管理方,方式,集中,集中式,中式,管理,物理,通道,有效,地利,利用,起来,可有,有效,减少,避免,实时,通信,延时,链路,活动,调度,器,LAS,定义,功能,基金,基金会,现场,总线,中所,链路,路上,要求,一个,一个,链路,活动,调度,器,LAS,LAS,数据,数据链,链路,链路层,用作,总线,仲裁,器,LAS,功能,认知,新设,设备,新设,设备,加入,链路,中去,链路,除去,没有,没有响应,响应,设备,链路,路上,发布,数据,数据链,链路,时间,调度,时间,调度,时间,轮询,poll,缓冲,缓冲区,存储,数据,设备,调度,时间,之间,发送,优先,优先级,驱动,令牌,设备,基金,基金会,现场,总线,能够,成为,LAS,设备,称为,链路,主设备,设备,Link,Master,Devices,设备,称为,基本,设备,Basic,Devices,图,

,图,现场,总线,设备,类型,

4,数据,数据链,链路,链路层,功能,数据,数据链,链路,链路层,分成,两个,工作,层,一个,提供,总线,访问,数据,数据链,链路,链路层,低层,功能,一个,数据,数据链,链路,使用,使用者,用者,之间,控制,控制数据,数据,数据传输,据传,传输,数据,数据链,链路,链路层,层高,高层,功能,两个,层,协同,集成,工作,看成,两个,网络,络子,层,数据,数据链,链路,链路层,低层,介质,访问,功能,介质,访问,观点,数据,数据链,链路,链路层,集中,令牌,传送,总线,补充,集合,运作,每个,总线,一个,一个集,集中,介质,访问,访问控制,控制,控制点,指,链路,活动,调度,器,LAS,一个,多个,持,令牌,设备,指,基本,设备,每个,网络,总线,即是,指,一条,链路,包含,一条,多条,链路,网络,看作,扩展,链路,扩展,链路,链路,桥,联接,接起,起来,本文,讨论,扩展,链路,基本,设备,Basic,Devices,基本,设备,指,持有,令牌,并作,作出,响应,设备,设备,包括,LAS,基本,设备,功能,接受,令牌,并发,发起,起数,数据,数据传输,据传,传输,能力,令牌,给予,设备,总线,上传,传送,传送数据,数据,权利,任一,一时,时刻,只能,一个,设备,持有,令牌,LAS,设备,分发,两种,令牌,第一,第一种,一种,轮询,poll,轮询,必须,立即,给出,已知,地址,数据,这种,令牌,发送,强制,数据,帧,CD,DLPPDU,得以,实现,第二,第二种,二种,给予,设备,一定,定时,段,总线,访问,权,这种,访问,权,三种,优先,优先级,这种,令牌,发送,通行,行令,令牌,数据,帧,PTDLPDU,得以,实现,强制,数据,帧,CD,DLPDU,基金,基金会,网络,支持,发布,订阅,Publisher,Subsc,riber,VCR,每个,发布,发布者,过数,数据,数据链,链路,缓冲,缓冲区,发布,数据,传送,缓冲,缓冲区,内容,CD,DLPDU,响应,通常,CD,DLPDU,LAS,发往,发布,发布者,缓冲,缓冲区,数据,数据链,链路,路地,地址,这种,情况,LAS,调度,循环,环发,发送,CD,DLPDU,CD,DLPDU,订阅,VCR,端点,发出,订阅,端点,点收,收到,上层,强制,制服,服务,务请,求,这种,情况,发生,这种,情况,设备,收到,通行,行令,令牌,PT,发出,CD,DLPDU,允许,这种,方式,发送,CD,DLPDU,VCR,端点,是非,周期,通行,行令,令牌,数据,帧,PT,DLPDU,用于,数据,发送,设备,收到,通行,行令,令牌,得到,一定,定时,时间,发送,发送数据,数据,权利,时间,大小,通行,行令,令牌,数据,帧,给定,扫描,描上,上层,放置,置于,数据,数据链,链路,服务,访问,问点,DLSAP,数据,数据链,链路,连接,连接端,端点,DLCEP,请求,类型,设备,备选,选择,择要,发送,数据,数据链,链路,协议,数据,帧,DLPDU,类型,数据,数据链,链路,服,务,访问,问点,用于,传送,送所,使用,连接,连接数,数据,数据链,链路,链路层,服务,报文,用于,传送,建立,发布,订阅,客户,服务,服务器,务器,VCR,报文,数据,数据链,链路,连接,连接端,端点,用于,传送,发布,订阅,客户,服务,服务器,务器,报文,传送,选择,请求,最旧,最早,放置,优先,优先级,最高,大于,等于,通行,行令,令牌,规定,优先,优先级,令牌,持有,时间,内能,发送,请求,设备,没有,剩下,数据,需要,发送,将令,令牌,显,式,返回,LAS,仍然,尚未,发送,请求,需要,发送,LAS,请求,更多,令牌,持有,时间,链路,主设备,设备,Link,Master,Devices,链路,主设备,设备,能成,成为,LAS,设备,一个,链路,两个,链路,主设备,设备,启动,认为,当前,LAS,失败,期间,链路,主设备,设备,竞争,争产,产生,LAS,竞争,过程,选择,节点,地址,最小,链路,主设备,设备,做,LAS,没有,有成,成为,LAS,链路,主设备,设备,LAS,备份,数据,数据链,链路,链路层,上层,数据,据传,传送,功能,基金,基金会,现场,总线,提供,三种,机制,传送,传送数据,数据,一种,连接,方式,两种,面向,连接,方式,连接,方式,用于,支持,报告,分发,VCR,一种,面向,连接,方式,用于,支持,发布,订阅,VCR,一种,用于,支持,客户,服务,服务器,务器,VCR,用于,发布,数据,Published,Data,面向,连接,数据,数据传输,据传,传输,发布,数据,传送,主要,发布,发布者,数据,数据链,链路,路数,数据,帧,缓冲,缓冲区,进行,发送,发布,发布者,必,分辨,订阅,发布,发布者,传送,数据,据传,传送,帧,包含,一个,地址,发布,发布者,地址,订阅,事先,知道,发布,发布者,地址,订阅,侦听,接收,收发,发布,发布者,传送,数据,帧,发布,发布者,建立,连接,接时,链路,订阅,发送,建立,连接,连接数,数据,帧,EC,DLPDU,EC,DLPDU,不要,要求,响应,订阅,建立,连接,接时,发布,发布者,动作,要求,发布,发布者,进行,响应,发布,发布者,收到,到来,自订,订阅,EC,DLPDU,再次,链路,广播,EC,D,LPDU,订阅,发出,EC,DLPDU,接收,收到,第一,第一个,一个,EC,DLPDU,完成,打开,连接,过程,订阅,使用,EC,DLPDU,可能,一开,发布,发布者,发送,可能,发布,发布者,响应,订阅,发送,连接,打开,订阅,侦听,数据,据传,传送,数据,数据链,链路,路数,数据,帧,DT,DLPDU,忽,略,以后,收到,发布,发布者,EC,DLPDU,发布,发布者,收到,带有,发布,发布者,DLCEP,地址,CD,DLPDU,发出,DT,DLPDU,立即,响应,发布,数据,数据传输,据传,传输,发生,该地,地址,DLCEP,连接,未,打开,相关,缓冲,缓冲区,没有,收到,初始,初始化,更新,没有,没有响应,响应,应该,CD,DLPDU,DT,DLPDU,发出,发布,数据,数据传输,据传,传输,以是,调度,LAS,发送,CD,DLPDU,或非,调度,订阅,发送,CD,DL,PDU,一个,连接,DT,DLPDU,相同,VCR,规定,优先,优先级,进行,传输,这种,传输,可能,有序,如数,数据,重复,传送,检查,查出,查出来,发布,发布者,传送,间隔,之间,没有,更新,缓冲,缓冲区,数据,副本,传送,送出,送出去,出去,调度,发布,数据,链路,路上,发送,用于,进行,请求,响应,应交,交换,面向,连接,数据,数据传输,据传,传输,请求,响应,数据,数据传输,据传,传输,主要,要用,用于,客户,服务,服务器,服务器之间,务器,之间,队列,进行,行数,数据,数据传输,据传,传输,发起,发起者,客户,VCR,端点,机,peer,VCR,端点,发送,请求,服务,服务器,务器,服务,服务器,务器,作出,响应,返回,回信,信息,表明,上层,接受,请求,进行,连接,之上,数据,数据传输,据传,传输,DT,D,LPDU,相同,优先,优先级,进行,传输,这种,连接,方式,提供,两种,服务,服务质量,质量,经典,CLASSICAL,乱序,DISORDERED,经典,指数,数据,数据链,链路,链路层,竭力,有序,传输,递送,DT,DLPDU,不能,达到,目标,断开,断开连接,连接,必要,进行,一次,重试,乱序,不同,到达,次序,向上,上层,递送,传送,数据,数据,数据流,有空,空隙,不予,理会,这种,空隙,丢失,DT,DLPDU,数据,帧,引起,经典,进行,一次,重试,失败,数据,数据链,链路,链路层,断开,连接,连接数,数据,数据传输,据传,传输,连接,连接数,数据,数据传输,据传,传输,主要,要用,用于,DLSAP,之间,队列,进行,独立,DLPDU,传送,数据,数据链,链路,链路层,保存,相关,信息,进行,传输,控制,目标,地址,组态,DLSAP,组,Group,地址,多点,传送,允许,报告,源,发布,发布者,发送,发送给,送给,同一,一组,地址,这种,传输,类型,分发,发报,报告,允许,报告,池,接收,接收者,不必,分辨,报告,源,位置,有无,连接,独立,每次,传送,优先,优先级,得分,规定,每个,VCR,只能,一个,优先,优先级,规定,上层,使用,VCR,规定,优先,优先级,数据,数据传输,据传,传输,必须,上层,给出,优先,优先级,数据,数据链,链路,链路层,实现,采用,ANSI,C,语言,一种,嵌入,嵌入式,实时,实时操作系统,操作,操作系统,系统,进行,混合,合编,编程,已经,实现,基金,基金会,现场,总线,线规,规范,specification,协议,protocol,规定,数据,数据链,链路,链路层,有功,功能,实现,方法,这种,嵌入,嵌入式,实时,实时操作系统,操作,操作系统,系统,完成,任务,创建,任务,调度,通讯,同步,内存,管理,定时,定时器,创建,删除,管理,其余部分,余部,部分,均,ANSI,C,编程,实现,图,给出,编制,数据,数据链,链路,链路层,程序,一个,简要,数据,数据流,图,下面,讨论,下面,个数,数据,数据流,图,



,图,数据,键,路,层,简要,要数,数据,数据流,图,

,网络,层状,结构,称,上层,下层,命令,请求,下层,请求,回应,应为,确认,下层,向上,上层,层报,报告,消息,指示,上层,指示,回应,应为,响应,图,第一,第一部,一部,一部分,部分,分给,给出,数据,数据流,总体,走向,发送,应用,应用层,进程,向下,数据,数据流,请求,响应,A,发送,过程,处理,形成,DLPDU,放入,调度,请求,队列,Q,US,收到,PT,令牌,发出,最早,放入,入队,队列,优先,优先级,最高,DLPDU,每个,DLPDU,一个,时间,集中,定时,定时器,对应,收到,PT,定时,定时器,超时,进行,一系,一系列,系列,操作,断开,断开连接,连接,DLPDU,发出,取消,定时,定时器,DLPDU,发出,若需,需要,确认,重新,重新启动,启动,一定,定时,定时器,进行,差错,差错控制,控制,数据,数据链,链路,链路层,收到,CD,令牌,发送,发送缓冲区,缓冲,缓冲区,取出,用户,用户数,户数,数据,形成,DT,DLPDU,直接,接发,发往,物理,物理层,不用,发往,Q,US,接收,收方,收到,DLPDU,B,接收,收过,过程,处理,生成,指示,确认,发送,发送给,送给,应用,应用层,进程,A,处理,处理过程,理过,过程,请求,响应,判断,断后,不同,情况,进行,处理,收到,建立,连接,EC,请求,形成,EC,DLPDU,发往,Q,US,收到,强制,制服,服务,务请,请求,形成,CD,DLPDU,发往,Q,US,收到,数据,Data,请求,形成,DT,DLPDU,控制,帧,请,求,发往,数据,数据链,链路,服务,访问,问点,DLSAP,队列,相关,数据,数据链,链路,连接,连接端,端点,DLCEP,时侯,发送,队列,取出,用户,用户数,户数,数据,生成,DT,DLPDU,控制,帧,合在,合在一起,一起,形成,DT,DLPDU,发往,Q,US,请求,发往,缓冲,缓冲区,相关,数据,数据链,链路,连接,连接端,端点,DLCEP,时侯,发送,缓冲,区,取出,用户,用户数,户数,数据,生成,DT,DLPDU,控制,帧,合在,合在一起,一起,形成,DT,DLPDU,发往,Q,US,收,单元,数据,UnitData,请求,发送,队列,取出,用户,用户数,户数,数据,形成,DT,DLPDU,发往,Q,US,收到,响应,注,可能,建立,连接,响应,形成,EC,DLPDU,发往,Q,US,B,处理,处理过程,理过,过程,DLPDU,判断,断后,不同,情况,进行,处理,收到,EC,DLPDU,连接,建立,立时,应用,应用层,发送,建立,连接,确认,形成,带,用户,用户数,户数,数据,DTDLPDU,发往,Q,US,连接,未,建立,立时,应用,应用层,发送,建立,连接,指示,收到,DCDLPDU,应用,应用层,发,断开,断开连接,连接,指示,收到,DT,DLPDU,应用,应用层,发,数据,指示,Data,Indicat,ion,相关,相关联,关联,接收,收队,队列,接收,接收缓冲区,缓冲,缓冲区,DT,DLPDU,带,用户,用户数,户数,数据,送入,收队,队列,接收,接收缓冲区,缓冲,缓冲区,收到,CD,DLPDU,重发,发送,发送缓冲区,缓冲,缓冲区,区内,内容,形成,带,用户,用户数,户数,数据,DT,DLPDU,发往,Q,US,数据,数据链,链路,链路层,主要,要数,数据,数据流,流向,个数,数据,数据流,图,编制,基金,基金会,现场,总线,协议,栈,数据,数据链,链路,链路层,程序,结语,本文,给出,基金,基金会,现场,总线,数据,数据链,链路,链路层,工作,机理,简单,介绍,给出,实现,方式,简要,叙述,所设,设计,程序,达到,预期,目标,完成,基金,基金会,现场,总线,协议,中所,规定,数据,数据链,链路,链路层,各项,功能,基金,基金会,现场,总线,我国,目前,处于,发展,阶段,很多,工作,做,诸君,共勉,作者,作者简介,简介,胥,川,1973,生,硕士,研究,研究生,研究,领域,现场,总线,通信,通信协议,协议,栈,软件,软件开发,开发,王,宏,1963,生,研究,领域,网络,网络通信,通信,工业,自动,自动化,控制,控制系统,系统,王,智,1969,生,博士,博士生,研究,领域,通信,系统,统建,建模,作者,单位,中国,中国科学院,科学,科学院,学院,沈阳,自动,自动化,计算,计算中心,中心,沈阳,110015
,参考,参考文献,文献,FOUNDATION,tm,Fieldbus,Specifications,System,Architecture,Revision,Fieldbus,Foundation,1996
2,FOUNDATION,tm,Fieldbus,Specifications,Data,Link,Protocol,Specification,Revision,Fieldbus,Foundation,1996
3,Computer,Network,Third,Edition,Andrew,S,Tanenbaum
,收稿,日期,199,04,21
